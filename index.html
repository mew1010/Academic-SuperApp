<!DOCTYPE html>
<html lang="tr" id="app-lang">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academic SuperApp</title>
    <meta name="description" content="Akademik Ã§alÄ±ÅŸmalar iÃ§in hesaplama araÃ§larÄ±.">
    <link rel="icon" type="image/png" href="https://placehold.co/32x32/1d4ed8/ffffff?text=A">

    <!-- Tailwind CSS YÃ¼kleniyor -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* bg-gray-100 */
        }
        /* Ã–zel stiller */
        .symbol { font-weight: 700; color: #1e40af; }
        
        .footer-signature { cursor: pointer; transition: all 0.3s ease; }
        .footer-signature:hover { color: #3b82f6; text-shadow: 0 0 10px #bfdbfe; }
        
        .btn-lock-default { background-color: #10b981; }
        .btn-lock-default:hover { background-color: #059669; }
        
        .icon-link { display: inline-flex; align-items: center; justify-content: center; width: 24px; height: 24px; margin: 0 5px; transition: opacity 0.2s; }
        .icon-link:hover { opacity: 0.7; }

        /* Sidebar Aktif Link Stili */
        .nav-item.active {
            background-color: #374151; /* gray-700 */
            border-left: 4px solid #6366f1; /* indigo-500 */
            color: #ffffff;
        }
        .nav-item {
            border-left: 4px solid transparent;
        }
        
        /* Kategori BaÅŸlÄ±klarÄ± */
        .nav-category {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: #9ca3af; /* gray-400 */
            padding: 1rem 1.5rem 0.5rem 1.5rem;
            font-weight: 700;
            letter-spacing: 0.05em;
        }

        /* Responsive Grid ayarlarÄ± */
        .pearson-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        @media (min-width: 1024px) {
            .pearson-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        /* APA Form AlanlarÄ± GeÃ§iÅŸ Efekti */
        .apa-field {
            transition: all 0.3s ease-in-out;
        }

        /* Nitel/Nicel/Karma/Sentez KartlarÄ± */
        .design-card {
            transition: all 0.2s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .design-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .design-card.selected {
            border-color: #4f46e5; /* indigo-600 */
            background-color: #eef2ff; /* indigo-50 */
        }
    </style>
</head>
<body class="h-screen flex flex-col md:flex-row overflow-hidden">

    <!-- SOL SIDEBAR (MENÃœ) -->
    <aside class="w-full md:w-64 bg-gray-900 text-gray-300 flex-shrink-0 flex flex-col shadow-xl z-20">
        <!-- App Logo / BaÅŸlÄ±k -->
        <div class="p-6 bg-gray-800 flex items-center justify-center border-b border-gray-700">
            <h1 class="text-xl font-bold text-white tracking-wide flex items-center gap-2">
                <span class="text-2xl">ğŸ“</span> 
                <span data-tr="Akademik SuperApp" data-en="Academic SuperApp">Akademik SuperApp</span>
            </h1>
        </div>

        <!-- MenÃ¼ Linkleri -->
        <nav class="flex-1 overflow-y-auto py-4">
            <ul class="space-y-1">
                
                <!-- Kategori: Analiz -->
                <li class="nav-category" data-tr="Veri Analizi" data-en="Data Analysis">Veri Analizi</li>
                <li>
                    <button onclick="switchView('pearson')" id="nav-pearson" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-800 hover:text-white transition-colors duration-200 flex items-center gap-3 active">
                        <span>ğŸ”—</span>
                        <span data-tr="Pearson r BirleÅŸtirici" data-en="Pearson r Combiner">Pearson r BirleÅŸtirici</span>
                    </button>
                </li>
                <li>
                    <button onclick="switchView('effect-size')" id="nav-effect-size" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-800 hover:text-white transition-colors duration-200 flex items-center gap-3">
                        <span>ğŸ“Š</span>
                        <span data-tr="Etki BÃ¼yÃ¼klÃ¼ÄŸÃ¼" data-en="Effect Size Calculator">Etki BÃ¼yÃ¼klÃ¼ÄŸÃ¼</span>
                    </button>
                </li>
                <li>
                    <button onclick="switchView('sample-size')" id="nav-sample-size" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-800 hover:text-white transition-colors duration-200 flex items-center gap-3">
                        <span>ğŸ‘¥</span>
                        <span data-tr="Ã–rneklem HesaplayÄ±cÄ±" data-en="Sample Size Calculator">Ã–rneklem HesaplayÄ±cÄ±</span>
                    </button>
                </li>
                <li>
                    <button onclick="switchView('normality')" id="nav-normality" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-800 hover:text-white transition-colors duration-200 flex items-center gap-3">
                        <span>ğŸ””</span>
                        <span data-tr="Normallik Testi" data-en="Normality Test">Normallik Testi</span>
                    </button>
                </li>

                <!-- Kategori: YazÄ±m ve Referans -->
                <li class="nav-category" data-tr="YazÄ±m & Referans" data-en="Writing & Reference">YazÄ±m & Referans</li>
                <li>
                    <button onclick="switchView('apa-generator')" id="nav-apa-generator" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-800 hover:text-white transition-colors duration-200 flex items-center gap-3">
                        <span>ğŸ“</span>
                        <span data-tr="APA 7 OluÅŸturucu" data-en="APA 7 Generator">APA 7 OluÅŸturucu</span>
                    </button>
                </li>
                <li>
                    <button onclick="switchView('abstract-checker')" id="nav-abstract-checker" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-800 hover:text-white transition-colors duration-200 flex items-center gap-3">
                        <span>ğŸ”¡</span>
                        <span data-tr="Ã–zet KontrolÃ¼" data-en="Abstract Checker">Ã–zet KontrolÃ¼</span>
                    </button>
                </li>

                <!-- Kategori: AraÅŸtÄ±rma SÃ¼reci -->
                <li class="nav-category" data-tr="AraÅŸtÄ±rma SÃ¼reci" data-en="Research Process">AraÅŸtÄ±rma SÃ¼reci</li>
                <li>
                    <button onclick="switchView('prisma')" id="nav-prisma" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-800 hover:text-white transition-colors duration-200 flex items-center gap-3">
                        <span>ğŸ“‰</span>
                        <span data-tr="PRISMA SayacÄ±" data-en="PRISMA Counter">PRISMA SayacÄ±</span>
                    </button>
                </li>
                <li>
                    <button onclick="switchView('pico')" id="nav-pico" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-800 hover:text-white transition-colors duration-200 flex items-center gap-3">
                        <span>ğŸ§©</span>
                        <span data-tr="PICO OluÅŸturucu" data-en="PICO Generator">PICO OluÅŸturucu</span>
                    </button>
                </li>
                <li>
                    <button onclick="switchView('randomizer')" id="nav-randomizer" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-800 hover:text-white transition-colors duration-200 flex items-center gap-3">
                        <span>ğŸ²</span>
                        <span data-tr="Rastgele Atama" data-en="Randomizer">Rastgele Atama</span>
                    </button>
                </li>

                <!-- KATEGORÄ°: AraÅŸtÄ±rma TÃ¼rleri -->
                <li class="nav-category" data-tr="AraÅŸtÄ±rma TÃ¼rleri" data-en="Research Types">AraÅŸtÄ±rma TÃ¼rleri</li>
                <li>
                    <button onclick="switchView('qualitative')" id="nav-qualitative" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-800 hover:text-white transition-colors duration-200 flex items-center gap-3">
                        <span>ğŸ—£ï¸</span>
                        <span data-tr="Nitel AraÅŸtÄ±rma" data-en="Qualitative Research">Nitel AraÅŸtÄ±rma</span>
                    </button>
                </li>
                <li>
                    <button onclick="switchView('quantitative')" id="nav-quantitative" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-800 hover:text-white transition-colors duration-200 flex items-center gap-3">
                        <span>ğŸ”¢</span>
                        <span data-tr="Nicel AraÅŸtÄ±rma" data-en="Quantitative Research">Nicel AraÅŸtÄ±rma</span>
                    </button>
                </li>
                <li>
                    <button onclick="switchView('mixed')" id="nav-mixed" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-800 hover:text-white transition-colors duration-200 flex items-center gap-3">
                        <span>ğŸ”„</span>
                        <span data-tr="Karma AraÅŸtÄ±rma" data-en="Mixed Research">Karma AraÅŸtÄ±rma</span>
                    </button>
                </li>
                <li>
                    <button onclick="switchView('synthesis')" id="nav-synthesis" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-800 hover:text-white transition-colors duration-200 flex items-center gap-3">
                        <span>ğŸ§¬</span>
                        <span data-tr="Sentez Ã‡alÄ±ÅŸmalarÄ±" data-en="Synthesis Studies">Sentez Ã‡alÄ±ÅŸmalarÄ±</span>
                    </button>
                </li>

            </ul>
        </nav>

        <!-- Sidebar Footer -->
        <div class="p-3 bg-gray-800 border-t border-gray-700 text-center flex flex-col items-center gap-0.5">
            <div class="text-[9px] text-gray-500 font-mono tracking-widest mb-0.5">v1.0 SuperApp</div>
            <div class="footer-signature text-gray-300 text-[10px] font-bold">Made by AnÄ±l SarÄ±alai âš¡</div>
            <div class="flex justify-center items-center gap-2 mt-0.5">
                <a href="mailto:anilsarialai@gmail.com" class="icon-link text-gray-400 hover:text-white transition-colors" title="E-posta GÃ¶nder"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-3.5 h-3.5"><path d="M1.5 8.75c0-.966.784-1.75 1.75-1.75h17c.966 0 1.75.784 1.75 1.75v6.5c0 .966-.784 1.75-1.75 1.75h-17c-.966 0-1.75-.784-1.75-1.75v-6.5zm1.75-.25a.25.25 0 0 0-.25.25v6.5c0 .138.112.25.25.25h17a.25.25 0 0 0 .25-.25v-6.5a.25.25 0 0 0-.25-.25h-17zm1.196.486l6.63 4.972a.75.75 0 0 0 .948 0l6.63-4.972c.162-.121.378-.063.447.135.069.198-.01.424-.172.545l-6.72 5.04a2.25 2.25 0 0 1-2.822 0l-6.72-5.04c-.162-.121-.241-.347-.172-.545.069-.198.285-.256.447-.135z"/></svg></a>
                <a href="https://github.com/mew1010/Pearson-r-Combiner" target="_blank" rel="noopener noreferrer" class="icon-link text-gray-400 hover:text-white transition-colors" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-3.5 h-3.5"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.419 2.864 8.199 6.836 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.704-2.782.605-3.37-.271-3.37-.271-.454-1.155-1.107-1.465-1.107-1.465-.905-.62.068-.608.068-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.918.831.092-.647.35-1.087.636-1.334-2.22-.253-4.555-1.11-4.555-4.943 0-1.092.39-1.983 1.03-2.675-.104-.252-.445-1.266.098-2.651 0 0 .84-.272 2.75 1.025.795-.22 1.635-.33 2.47-.33.835 0 1.675.11 2.47.33 1.91-1.297 2.75-1.025 2.75-1.025.543 1.385.202 2.399.098 2.651.64.692 1.03 1.583 1.03 2.675 0 3.843-2.335 4.687-4.567 4.935.359.309.678.922.678 1.867 0 1.334-.012 2.41-.012 2.723 0 .268.18.58.688.482C19.136 20.198 22 16.419 22 12c0-5.523-4.477-10-10-10z" clip-rule="evenodd" /></svg></a>
            </div>
        </div>
    </aside>

    <!-- SAÄ ANA Ä°Ã‡ERÄ°K ALANI -->
    <main class="flex-1 flex flex-col h-full overflow-hidden bg-gray-50 relative">
        
        <!-- Ãœst Bar (Dil SeÃ§imi) -->
        <header class="bg-white shadow-sm px-6 py-3 flex justify-end items-center z-10 shrink-0">
            <div class="flex space-x-2">
                <button onclick="setLanguage('tr')" id="lang-tr" class="text-xs font-bold px-3 py-1.5 rounded-md border border-indigo-600 text-white bg-indigo-600 transition-colors">TR</button>
                <button onclick="setLanguage('en')" id="lang-en" class="text-xs font-bold px-3 py-1.5 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-100 transition-colors">EN</button>
            </div>
        </header>

        <!-- Scrollable Ä°Ã§erik AlanÄ± -->
        <div class="flex-1 overflow-y-auto p-4 sm:p-8 scroll-smooth">
            <div class="max-w-5xl mx-auto">

                <!-- [MEVCUT: Pearson, Effect Size, Sample, Normality, APA, Abstract] -->
                <!-- Kod tasarrufu iÃ§in Ã¶nceki kod bloklarÄ± aynen korunur -->
                <!-- 1. VIEW: PEARSON R COMBINER (MEVCUT) -->
                <div id="view-pearson" class="view-section">
                    <div class="text-center mb-8"><h2 class="text-3xl font-extrabold text-gray-800 mb-2" data-tr="Pearson r BirleÅŸtirici" data-en="Pearson r Combiner">Pearson r BirleÅŸtirici</h2><p class="text-gray-500" data-tr="Fisher'Ä±n Z DÃ¶nÃ¼ÅŸÃ¼mÃ¼ ile aÄŸÄ±rlÄ±klÄ± ortalama korelasyon hesaplama aracÄ±." data-en="Weighted average correlation calculation tool using Fisher's Z-Transformation.">Fisher'Ä±n Z DÃ¶nÃ¼ÅŸÃ¼mÃ¼ ile aÄŸÄ±rlÄ±klÄ± ortalama korelasyon hesaplama aracÄ±.</p></div>
                    <div class="bg-white card rounded-xl p-6 sm:p-10 pearson-grid"><div><h3 class="text-lg font-bold text-indigo-600 mb-4 border-b pb-2" data-tr="Alt Boyut ve r KatsayÄ±sÄ±" data-en="Subscale and r Coefficient">Alt Boyut ve r KatsayÄ±sÄ±</h3><div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-1" data-tr="Alt Boyut AdÄ±:" data-en="Subscale Name:">Alt Boyut AdÄ±:</label><input type="text" id="entry_title" data-tr-placeholder="Alt boyut adÄ±" data-en-placeholder="Subscale name" placeholder="Alt boyut adÄ±" onkeydown="handleKeydown(event)" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150"><p id="title_error" class="text-sm text-red-500 mt-1 hidden" data-tr="LÃ¼tfen alt boyutun adÄ±nÄ± girin." data-en="Please enter the name of the subscale.">LÃ¼tfen alt boyutun adÄ±nÄ± girin.</p></div><div><label class="block text-sm font-medium text-gray-700 mb-1" data-tr="Korelasyon KatsayÄ±sÄ± (r):" data-en="Correlation Coefficient (r):">Korelasyon KatsayÄ±sÄ± (<span class="symbol">r</span>):</label><input type="text" id="r_score" data-tr-placeholder="-1.0 ile 1.0 arasÄ±nda" data-en-placeholder="Between -1.0 and 1.0" value="0." onkeydown="handleKeydown(event)" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150"><p id="r_error" class="text-sm text-red-500 mt-1 hidden" data-tr="GeÃ§ersiz r deÄŸeri." data-en="Invalid r value.">GeÃ§ersiz r deÄŸeri.</p></div><div><label class="block text-sm font-medium text-gray-700 mb-1" data-tr="Ã–rneklem BÃ¼yÃ¼klÃ¼ÄŸÃ¼ (n):" data-en="Sample Size (n):">Ã–rneklem BÃ¼yÃ¼klÃ¼ÄŸÃ¼ (<span class="symbol">n</span>):</label><div class="flex space-x-2"><input type="number" id="n_size" data-tr-placeholder="Min 3" data-en-placeholder="Min 3" placeholder="Min 3" step="1" min="3" onkeydown="handleKeydown(event)" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150"><button onclick="toggleNLock()" id="n_lock_button" class="flex-shrink-0 text-white font-semibold px-3 py-2 rounded-lg transition duration-150 text-sm btn-lock-default" data-tr="Sabitle" data-en="Lock">Sabitle</button></div><p id="n_error" class="text-sm text-red-500 mt-1 hidden" data-tr="GeÃ§ersiz n deÄŸeri." data-en="Invalid n value.">GeÃ§ersiz n deÄŸeri.</p></div><button onclick="addEntry()" class="w-full bg-indigo-600 text-white font-semibold py-2.5 rounded-lg hover:bg-indigo-700 transition duration-200 focus:outline-none focus:ring-4 focus:ring-indigo-500 focus:ring-opacity-50" data-tr="Alt Boyutu Ekle" data-en="Add Subscale">Alt Boyutu Ekle</button><div id="message_area" class="text-sm text-center py-2 rounded-lg hidden"></div></div></div><div class="flex flex-col h-full"><h3 class="text-lg font-bold text-green-600 mb-4 border-b pb-2" data-tr="Girilen Veriler ve SonuÃ§" data-en="Entries and Result">Girilen Veriler ve SonuÃ§</h3><div id="data_list" class="flex-1 min-h-[150px] max-h-[300px] overflow-y-auto mb-4 p-2 bg-gray-50 rounded-lg border border-gray-200"><p id="placeholder_text" class="text-gray-400 italic text-sm text-center py-8" data-tr="Liste boÅŸ." data-en="List is empty.">Liste boÅŸ.</p></div><div class="space-y-3 mt-auto"><button onclick="calculateCombinedR()" class="w-full bg-green-600 text-white font-semibold py-2.5 rounded-lg hover:bg-green-700 transition duration-200 focus:outline-none disabled:bg-gray-400" id="calculate_button" disabled data-tr="BirleÅŸtirilmiÅŸ r'yi Hesapla" data-en="Calculate Combined r">BirleÅŸtirilmiÅŸ r'yi Hesapla</button><button onclick="clearAllData()" class="w-full bg-red-500 text-white font-semibold py-2.5 rounded-lg hover:bg-red-600 transition duration-200 focus:outline-none" data-tr="Temizle" data-en="Clear">Temizle</button></div><div id="results_area" class="mt-6 p-4 border-2 border-dashed border-gray-200 rounded-xl bg-gray-50 hidden"><h4 class="text-md font-semibold text-gray-800 mb-2" data-tr="SonuÃ§" data-en="Result">SonuÃ§</h4><div class="flex items-center justify-between bg-white p-3 rounded-lg border border-indigo-200 shadow-sm"><p class="text-base text-gray-700 font-medium"><span data-tr="BirleÅŸik r:" data-en="Combined r:">BirleÅŸik r:</span> <span id="combined_r" class="font-extrabold text-xl ml-2 text-indigo-700"></span></p><button onclick="copyResult()" class="bg-indigo-50 text-indigo-700 border border-indigo-200 px-3 py-1 rounded text-sm hover:bg-indigo-100 transition" data-tr="Kopyala" data-en="Copy">Kopyala</button></div><p class="text-xs text-gray-500 mt-2"><span data-tr="Ortalama Z:" data-en="Avg Z:">Ortalama Z:</span> <span id="avg_z" class="font-mono"></span></p><div id="copy_message_area" class="text-xs text-center py-1 rounded mt-1 hidden bg-green-100 text-green-800"></div></div></div></div><div class="bg-white card rounded-xl p-6 mt-8"><div class="flex justify-between items-center mb-4 border-b pb-2"><h3 class="text-lg font-bold text-gray-800" data-tr="GeÃ§miÅŸ KayÄ±tlar" data-en="History">GeÃ§miÅŸ KayÄ±tlar</h3><button onclick="clearHistory()" id="clear_history_button" class="text-xs text-red-500 hover:text-red-700 font-medium hidden" data-tr="GeÃ§miÅŸi Sil" data-en="Clear History">GeÃ§miÅŸi Sil</button></div><div id="history_list" class="space-y-3"></div></div>
                </div>

                <div id="view-effect-size" class="view-section hidden">
                   <div class="text-center mb-8"><h2 class="text-3xl font-extrabold text-gray-800 mb-2" data-tr="Etki BÃ¼yÃ¼klÃ¼ÄŸÃ¼ HesaplayÄ±cÄ±" data-en="Effect Size Calculator">Etki BÃ¼yÃ¼klÃ¼ÄŸÃ¼ HesaplayÄ±cÄ±</h2><p class="text-gray-500" data-tr="Ä°ki grup arasÄ±ndaki farkÄ±n bÃ¼yÃ¼klÃ¼ÄŸÃ¼nÃ¼ (Cohen's d) hesaplayÄ±n." data-en="Calculate the magnitude of difference (Cohen's d) between two groups.">Ä°ki grup arasÄ±ndaki farkÄ±n bÃ¼yÃ¼klÃ¼ÄŸÃ¼nÃ¼ (Cohen's d) hesaplayÄ±n.</p></div><div class="bg-white card rounded-xl p-6 sm:p-10"><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="space-y-3 p-4 bg-gray-50 rounded-lg border"><h3 class="font-bold text-indigo-700" data-tr="1. Grup (Deney)" data-en="Group 1 (Experiment)">1. Grup (Deney)</h3><div><label class="text-xs text-gray-600 block mb-1">Ortalama (Mean)</label><input type="number" id="es_m1" class="w-full border rounded p-2" step="any"></div><div><label class="text-xs text-gray-600 block mb-1">Standart Sapma (SD)</label><input type="number" id="es_sd1" class="w-full border rounded p-2" step="any"></div><div><label class="text-xs text-gray-600 block mb-1">Ã–rneklem (N)</label><input type="number" id="es_n1" class="w-full border rounded p-2" step="1"></div></div><div class="space-y-3 p-4 bg-gray-50 rounded-lg border"><h3 class="font-bold text-indigo-700" data-tr="2. Grup (Kontrol)" data-en="Group 2 (Control)">2. Grup (Kontrol)</h3><div><label class="text-xs text-gray-600 block mb-1">Ortalama (Mean)</label><input type="number" id="es_m2" class="w-full border rounded p-2" step="any"></div><div><label class="text-xs text-gray-600 block mb-1">Standart Sapma (SD)</label><input type="number" id="es_sd2" class="w-full border rounded p-2" step="any"></div><div><label class="text-xs text-gray-600 block mb-1">Ã–rneklem (N)</label><input type="number" id="es_n2" class="w-full border rounded p-2" step="1"></div></div></div><div class="mt-6 flex justify-center"><button onclick="calculateEffectSize()" class="bg-indigo-600 text-white px-8 py-3 rounded-lg font-bold hover:bg-indigo-700 transition" data-tr="Hesapla" data-en="Calculate">Hesapla</button></div><div id="es_result_area" class="mt-6 p-4 border-2 border-dashed border-green-200 rounded-xl bg-green-50 hidden text-center"><p class="text-lg text-gray-700"><span class="font-bold">Cohen's d:</span> <span id="es_d_value" class="text-2xl font-extrabold text-green-700 ml-2"></span></p><p class="text-sm text-gray-600 mt-2"><span data-tr="Yorum:" data-en="Interpretation:">Yorum:</span> <span id="es_interpretation" class="font-bold text-indigo-600"></span></p></div></div>
                </div>

                <div id="view-sample-size" class="view-section hidden">
                    <div class="text-center mb-8"><h2 class="text-3xl font-extrabold text-gray-800 mb-2" data-tr="Ã–rneklem BÃ¼yÃ¼klÃ¼ÄŸÃ¼ HesaplayÄ±cÄ±" data-en="Sample Size Calculator">Ã–rneklem BÃ¼yÃ¼klÃ¼ÄŸÃ¼ HesaplayÄ±cÄ±</h2><p class="text-gray-500" data-tr="Bir araÅŸtÄ±rma iÃ§in gerekli minimum Ã¶rneklem sayÄ±sÄ±nÄ± hesaplayÄ±n." data-en="Calculate the minimum sample size required for a study.">Bir araÅŸtÄ±rma iÃ§in gerekli minimum Ã¶rneklem sayÄ±sÄ±nÄ± hesaplayÄ±n.</p></div><div class="bg-white card rounded-xl p-6 sm:p-10 max-w-2xl mx-auto"><div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-1" data-tr="Evren BÃ¼yÃ¼klÃ¼ÄŸÃ¼ (N) - Ä°steÄŸe BaÄŸlÄ±" data-en="Population Size (N) - Optional">Evren BÃ¼yÃ¼klÃ¼ÄŸÃ¼ (N) - Ä°steÄŸe BaÄŸlÄ±</label><input type="number" id="ss_pop" class="w-full border rounded p-2" placeholder="Sonsuz evren iÃ§in boÅŸ bÄ±rakÄ±n" data-tr-placeholder="Sonsuz evren iÃ§in boÅŸ bÄ±rakÄ±n" data-en-placeholder="Leave empty for infinite population"></div><div><label class="block text-sm font-medium text-gray-700 mb-1" data-tr="GÃ¼ven AralÄ±ÄŸÄ± (Confidence Level)" data-en="Confidence Level">GÃ¼ven AralÄ±ÄŸÄ± (Confidence Level)</label><select id="ss_conf" class="w-full border rounded p-2 bg-white"><option value="1.96">95% (Standart)</option><option value="2.58">99%</option><option value="1.65">90%</option></select></div><div><label class="block text-sm font-medium text-gray-700 mb-1" data-tr="Hata PayÄ± (Margin of Error - %)" data-en="Margin of Error (%)">Hata PayÄ± (%):</label><input type="number" id="ss_margin" class="w-full border rounded p-2" value="5" step="0.1"></div><button onclick="calculateSampleSize()" class="w-full bg-indigo-600 text-white py-3 rounded-lg font-bold hover:bg-indigo-700 transition" data-tr="Hesapla" data-en="Calculate">Hesapla</button></div><div id="ss_result_area" class="mt-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg text-center hidden"><p class="text-gray-600 text-sm" data-tr="Gerekli Ã–rneklem BÃ¼yÃ¼klÃ¼ÄŸÃ¼:" data-en="Required Sample Size:">Gerekli Ã–rneklem BÃ¼yÃ¼klÃ¼ÄŸÃ¼:</p><p id="ss_result_value" class="text-4xl font-extrabold text-indigo-700 mt-1"></p></div></div>
                </div>

                <div id="view-normality" class="view-section hidden">
                    <div class="text-center mb-8"><h2 class="text-3xl font-extrabold text-gray-800 mb-2" data-tr="Normallik Testi YorumlayÄ±cÄ±" data-en="Normality Test Interpreter">Normallik Testi YorumlayÄ±cÄ±</h2><p class="text-gray-500" data-tr="Ã‡arpÄ±klÄ±k ve BasÄ±klÄ±k deÄŸerlerine gÃ¶re daÄŸÄ±lÄ±mÄ±n normalliÄŸini test edin." data-en="Test distribution normality based on Skewness and Kurtosis values.">Ã‡arpÄ±klÄ±k ve BasÄ±klÄ±k deÄŸerlerine gÃ¶re daÄŸÄ±lÄ±mÄ±n normalliÄŸini test edin.</p></div><div class="bg-white card rounded-xl p-6 sm:p-10 max-w-2xl mx-auto"><div class="grid grid-cols-2 gap-4 mb-4"><div><label class="block text-xs font-bold text-gray-600 mb-1" data-tr="Ã‡arpÄ±klÄ±k (Skewness)" data-en="Skewness">Ã‡arpÄ±klÄ±k</label><input type="number" id="nt_skew" class="w-full border rounded p-2" step="any"></div><div><label class="block text-xs font-bold text-gray-600 mb-1" data-tr="Std. Hata (Skewness Error)" data-en="Std. Error">Std. Hata</label><input type="number" id="nt_skew_err" class="w-full border rounded p-2" step="any"></div><div><label class="block text-xs font-bold text-gray-600 mb-1" data-tr="BasÄ±klÄ±k (Kurtosis)" data-en="Kurtosis">BasÄ±klÄ±k</label><input type="number" id="nt_kurt" class="w-full border rounded p-2" step="any"></div><div><label class="block text-xs font-bold text-gray-600 mb-1" data-tr="Std. Hata (Kurtosis Error)" data-en="Std. Error">Std. Hata</label><input type="number" id="nt_kurt_err" class="w-full border rounded p-2" step="any"></div></div><button onclick="calculateNormality()" class="w-full bg-indigo-600 text-white py-3 rounded-lg font-bold hover:bg-indigo-700 transition" data-tr="Analiz Et" data-en="Analyze">Analiz Et</button><div id="nt_result_area" class="mt-6 hidden space-y-3"><div class="p-3 rounded border" id="nt_skew_res_box"><p class="text-sm font-bold"><span data-tr="Ã‡arpÄ±klÄ±k Z-Skoru:" data-en="Skewness Z-Score:">Ã‡arpÄ±klÄ±k Z-Skoru:</span> <span id="nt_skew_z"></span></p><p class="text-xs mt-1" id="nt_skew_comment"></p></div><div class="p-3 rounded border" id="nt_kurt_res_box"><p class="text-sm font-bold"><span data-tr="BasÄ±klÄ±k Z-Skoru:" data-en="Kurtosis Z-Score:">BasÄ±klÄ±k Z-Skoru:</span> <span id="nt_kurt_z"></span></p><p class="text-xs mt-1" id="nt_kurt_comment"></p></div><p class="text-xs text-gray-400 text-center mt-2 italic" data-tr="Kriter: Z deÄŸerinin -1.96 ile +1.96 arasÄ±nda olmasÄ± (p > .05)" data-en="Criteria: Z value between -1.96 and +1.96 (p > .05)">Kriter: Z deÄŸerinin -1.96 ile +1.96 arasÄ±nda olmasÄ± (p > .05)</p></div></div>
                </div>

                <div id="view-apa-generator" class="view-section hidden">
                    <div class="text-center mb-8"><h2 class="text-3xl font-extrabold text-gray-800 mb-2" data-tr="APA 7 KaynakÃ§a OluÅŸturucu" data-en="APA 7 Citation Generator">APA 7 KaynakÃ§a OluÅŸturucu</h2><p class="text-gray-500" data-tr="Kitap, makale ve web siteleri iÃ§in hÄ±zlÄ±ca APA 7 formatÄ±nda kaynakÃ§a oluÅŸturun." data-en="Quickly create APA 7 formatted citations for books, articles, and websites.">Kitap, makale ve web siteleri iÃ§in hÄ±zlÄ±ca APA 7 formatÄ±nda kaynakÃ§a oluÅŸturun.</p></div><div class="bg-white card rounded-xl p-6 sm:p-10 max-w-3xl mx-auto"><div class="flex justify-center space-x-2 mb-6"><button onclick="setApaType('book')" id="btn-apa-book" class="px-4 py-2 rounded-lg font-bold text-sm bg-indigo-600 text-white transition">Kitap</button><button onclick="setApaType('article')" id="btn-apa-article" class="px-4 py-2 rounded-lg font-bold text-sm bg-gray-200 text-gray-700 hover:bg-gray-300 transition">Makale</button><button onclick="setApaType('website')" id="btn-apa-website" class="px-4 py-2 rounded-lg font-bold text-sm bg-gray-200 text-gray-700 hover:bg-gray-300 transition">Web Sitesi</button></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"><div class="col-span-1 md:col-span-2"><label class="block text-xs font-bold text-gray-600 mb-1" data-tr="Yazar SoyadÄ±, AdÄ±nÄ±n BaÅŸ Harfi (Ã–rn: YÄ±lmaz, A.)" data-en="Author Last Name, Initial (Ex: Smith, J.)">Yazar SoyadÄ±, AdÄ±nÄ±n BaÅŸ Harfi</label><input type="text" id="apa_author" class="w-full border rounded p-2" placeholder="YÄ±lmaz, A."></div><div><label class="block text-xs font-bold text-gray-600 mb-1" data-tr="YÄ±l (Parantez iÃ§i)" data-en="Year">YÄ±l</label><input type="text" id="apa_year" class="w-full border rounded p-2" placeholder="2023"></div><div id="apa-field-title" class="col-span-1 md:col-span-2"><label class="block text-xs font-bold text-gray-600 mb-1" data-tr="Eser BaÅŸlÄ±ÄŸÄ±" data-en="Title of Work">Eser BaÅŸlÄ±ÄŸÄ±</label><input type="text" id="apa_title" class="w-full border rounded p-2" placeholder="Kitap veya Makale AdÄ±"></div><div id="apa-group-book" class="col-span-1 md:col-span-2 apa-field"><label class="block text-xs font-bold text-gray-600 mb-1" data-tr="YayÄ±nevi" data-en="Publisher">YayÄ±nevi</label><input type="text" id="apa_publisher" class="w-full border rounded p-2" placeholder="Ã–rn: Pegem Akademi"></div><div id="apa-group-article" class="col-span-1 md:col-span-2 apa-field hidden grid grid-cols-2 gap-4"><div class="col-span-2"><label class="block text-xs font-bold text-gray-600 mb-1" data-tr="Dergi AdÄ±" data-en="Journal Name">Dergi AdÄ±</label><input type="text" id="apa_journal" class="w-full border rounded p-2"></div><div><label class="block text-xs font-bold text-gray-600 mb-1" data-tr="Cilt (Volume)" data-en="Volume">Cilt</label><input type="text" id="apa_volume" class="w-full border rounded p-2"></div><div><label class="block text-xs font-bold text-gray-600 mb-1" data-tr="SayÄ± (Issue)" data-en="Issue">SayÄ±</label><input type="text" id="apa_issue" class="w-full border rounded p-2"></div><div><label class="block text-xs font-bold text-gray-600 mb-1" data-tr="Sayfa AralÄ±ÄŸÄ±" data-en="Page Range">Sayfa AralÄ±ÄŸÄ±</label><input type="text" id="apa_pages" class="w-full border rounded p-2" placeholder="123-145"></div><div><label class="block text-xs font-bold text-gray-600 mb-1">DOI / URL</label><input type="text" id="apa_doi" class="w-full border rounded p-2" placeholder="https://doi.org/..."></div></div><div id="apa-group-website" class="col-span-1 md:col-span-2 apa-field hidden"><div class="mb-4"><label class="block text-xs font-bold text-gray-600 mb-1" data-tr="Site AdÄ±" data-en="Site Name">Site AdÄ±</label><input type="text" id="apa_site_name" class="w-full border rounded p-2"></div><div><label class="block text-xs font-bold text-gray-600 mb-1">URL</label><input type="text" id="apa_url" class="w-full border rounded p-2"></div></div></div><button onclick="generateAPA()" class="w-full bg-indigo-600 text-white py-3 rounded-lg font-bold hover:bg-indigo-700 transition" data-tr="OluÅŸtur" data-en="Generate">OluÅŸtur</button><div id="apa_result_container" class="mt-6 hidden"><p class="text-xs text-gray-500 mb-1" data-tr="SonuÃ§ (Kopyalamak iÃ§in tÄ±klayÄ±n):" data-en="Result (Click to copy):">SonuÃ§ (Kopyalamak iÃ§in tÄ±klayÄ±n):</p><div onclick="copyApaResult()" class="p-4 bg-gray-50 border border-gray-300 rounded cursor-pointer hover:bg-gray-100 transition relative group"><p id="apa_result_text" class="text-gray-800 font-serif"></p><span class="absolute top-2 right-2 text-xs text-indigo-600 opacity-0 group-hover:opacity-100 transition" data-tr="Kopyala" data-en="Copy">Kopyala</span></div><div id="apa_copy_msg" class="text-center text-green-600 text-xs mt-1 hidden">KopyalandÄ±!</div></div></div>
                </div>

                <div id="view-abstract-checker" class="view-section hidden">
                    <div class="text-center mb-8"><h2 class="text-3xl font-extrabold text-gray-800 mb-2" data-tr="Ã–zet (Abstract) KontrolcÃ¼sÃ¼" data-en="Abstract Checker">Ã–zet (Abstract) KontrolcÃ¼sÃ¼</h2><p class="text-gray-500" data-tr="Makale Ã¶zetinizin kelime ve karakter sÄ±nÄ±rlarÄ±nÄ± anlÄ±k olarak kontrol edin." data-en="Check word and character limits of your abstract instantly.">Makale Ã¶zetinizin kelime ve karakter sÄ±nÄ±rlarÄ±nÄ± anlÄ±k olarak kontrol edin.</p></div><div class="bg-white card rounded-xl p-6 sm:p-10 max-w-4xl mx-auto"><div class="relative"><textarea id="abstract_text" rows="10" class="w-full border rounded-lg p-4 text-gray-700 focus:ring-2 focus:ring-indigo-500 focus:outline-none" placeholder="Ã–zet metnini buraya yapÄ±ÅŸtÄ±rÄ±n..." oninput="checkAbstract()"></textarea><div class="absolute bottom-4 right-4 text-xs text-gray-400"><span id="abs_word_count">0</span> <span data-tr="Kelime" data-en="Words">Kelime</span></div></div><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6"><div class="bg-indigo-50 p-4 rounded-lg text-center border border-indigo-100"><div class="text-3xl font-bold text-indigo-600" id="stat_words">0</div><div class="text-xs text-indigo-400 font-bold uppercase tracking-wider" data-tr="Kelime SayÄ±sÄ±" data-en="Word Count">Kelime SayÄ±sÄ±</div></div><div class="bg-blue-50 p-4 rounded-lg text-center border border-blue-100"><div class="text-3xl font-bold text-blue-600" id="stat_chars">0</div><div class="text-xs text-blue-400 font-bold uppercase tracking-wider" data-tr="Karakter (BoÅŸluklu)" data-en="Chars (with spaces)">Karakter (BoÅŸluklu)</div></div><div class="bg-purple-50 p-4 rounded-lg text-center border border-purple-100"><div class="text-3xl font-bold text-purple-600" id="stat_sentences">0</div><div class="text-xs text-purple-400 font-bold uppercase tracking-wider" data-tr="CÃ¼mle SayÄ±sÄ±" data-en="Sentences">CÃ¼mle SayÄ±sÄ±</div></div></div><div class="mt-6 bg-yellow-50 border-l-4 border-yellow-400 p-4"><div class="flex"><div class="ml-3"><p class="text-sm text-yellow-700"><span class="font-bold" data-tr="Ä°pucu:" data-en="Tip:">Ä°pucu:</span> <span data-tr="Genellikle Ã¶zetler 150-250 kelime arasÄ±nda olmalÄ±dÄ±r. Dergi kurallarÄ±nÄ± kontrol ediniz." data-en="Abstracts are usually between 150-250 words. Check journal guidelines.">Genellikle Ã¶zetler 150-250 kelime arasÄ±nda olmalÄ±dÄ±r. Dergi kurallarÄ±nÄ± kontrol ediniz.</span></p></div></div></div></div>
                </div>

                <!-- 7. VIEW: NITEL ARAÅTIRMA -->
                <div id="view-qualitative" class="view-section hidden">
                    <div class="text-center mb-8"><h2 class="text-3xl font-extrabold text-gray-800 mb-2" data-tr="Nitel AraÅŸtÄ±rma TasarÄ±m Rehberi" data-en="Qualitative Research Design Guide">Nitel AraÅŸtÄ±rma TasarÄ±m Rehberi</h2><p class="text-gray-500" data-tr="AraÅŸtÄ±rmanÄ±z iÃ§in en uygun nitel deseni seÃ§in ve detaylarÄ± inceleyin." data-en="Choose the best qualitative design for your research and explore the details.">AraÅŸtÄ±rmanÄ±z iÃ§in en uygun nitel deseni seÃ§in ve detaylarÄ± inceleyin.</p></div><div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-8"><div onclick="showQualitativeDetail('phenomenology')" class="design-card bg-white p-4 rounded-xl text-center shadow-sm hover:shadow-md transition cursor-pointer border-2 border-transparent" id="card-phenomenology"><div class="text-3xl mb-2">ğŸŒŸ</div><div class="text-xs font-bold text-gray-700" data-tr="Fenomenoloji" data-en="Phenomenology">Fenomenoloji</div></div><div onclick="showQualitativeDetail('case-study')" class="design-card bg-white p-4 rounded-xl text-center shadow-sm hover:shadow-md transition cursor-pointer border-2 border-transparent" id="card-case-study"><div class="text-3xl mb-2">ğŸ“¦</div><div class="text-xs font-bold text-gray-700" data-tr="Durum Ã‡alÄ±ÅŸmasÄ±" data-en="Case Study">Durum Ã‡alÄ±ÅŸmasÄ±</div></div><div onclick="showQualitativeDetail('grounded-theory')" class="design-card bg-white p-4 rounded-xl text-center shadow-sm hover:shadow-md transition cursor-pointer border-2 border-transparent" id="card-grounded-theory"><div class="text-3xl mb-2">ğŸŒ±</div><div class="text-xs font-bold text-gray-700" data-tr="GÃ¶mÃ¼lÃ¼ Teori" data-en="Grounded Theory">GÃ¶mÃ¼lÃ¼ Teori</div></div><div onclick="showQualitativeDetail('ethnography')" class="design-card bg-white p-4 rounded-xl text-center shadow-sm hover:shadow-md transition cursor-pointer border-2 border-transparent" id="card-ethnography"><div class="text-3xl mb-2">ğŸŒ</div><div class="text-xs font-bold text-gray-700" data-tr="Etnografi" data-en="Ethnography">Etnografi</div></div><div onclick="showQualitativeDetail('narrative')" class="design-card bg-white p-4 rounded-xl text-center shadow-sm hover:shadow-md transition cursor-pointer border-2 border-transparent" id="card-narrative"><div class="text-3xl mb-2">ğŸ“–</div><div class="text-xs font-bold text-gray-700" data-tr="AnlatÄ±" data-en="Narrative">AnlatÄ±</div></div></div><div id="qual-detail-area" class="bg-white card rounded-xl p-6 sm:p-10 hidden"><div class="flex items-center gap-4 mb-6 pb-4 border-b"><div id="qual-icon" class="text-5xl"></div><div><h3 id="qual-title" class="text-2xl font-bold text-indigo-700"></h3><p id="qual-desc" class="text-gray-600 text-sm italic"></p></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="space-y-6"><div class="bg-blue-50 p-4 rounded-lg border border-blue-100"><h4 class="font-bold text-blue-800 text-sm uppercase mb-2" data-tr="Ã–nerilen Ã–rneklem (Creswell)" data-en="Recommended Sample (Creswell)">Ã–nerilen Ã–rneklem (Creswell)</h4><p id="qual-sample" class="text-2xl font-extrabold text-blue-600"></p><p class="text-xs text-blue-500 mt-1" data-tr="KatÄ±lÄ±mcÄ± SayÄ±sÄ±" data-en="Number of Participants">KatÄ±lÄ±mcÄ± SayÄ±sÄ±</p></div><div><h4 class="font-bold text-gray-700 mb-2" data-tr="Odak NoktasÄ±" data-en="Focus">Odak NoktasÄ±</h4><p id="qual-focus" class="text-sm text-gray-600"></p></div></div><div class="space-y-6"><div><h4 class="font-bold text-gray-700 mb-2" data-tr="Veri Toplama AraÃ§larÄ±" data-en="Data Collection Tools">Veri Toplama AraÃ§larÄ±</h4><ul id="qual-methods" class="list-disc list-inside text-sm text-gray-600 space-y-1"></ul></div><div class="bg-yellow-50 p-4 rounded-lg border border-yellow-100"><h4 class="font-bold text-yellow-800 text-sm mb-2" data-tr="PÃ¼f NoktasÄ±" data-en="Key Tip">PÃ¼f NoktasÄ±</h4><p id="qual-tip" class="text-sm text-yellow-700"></p></div></div></div></div><div id="qual-placeholder-msg" class="text-center py-12 text-gray-400"><div class="text-4xl mb-2">ğŸ‘†</div><p data-tr="DetaylarÄ± gÃ¶rmek iÃ§in yukarÄ±dan bir desen seÃ§in." data-en="Select a design above to see details.">DetaylarÄ± gÃ¶rmek iÃ§in yukarÄ±dan bir desen seÃ§in.</p></div>
                </div>

                <!-- 8. VIEW: NICEL ARAÅTIRMA -->
                <div id="view-quantitative" class="view-section hidden">
                    <div class="text-center mb-8"><h2 class="text-3xl font-extrabold text-gray-800 mb-2" data-tr="Nicel AraÅŸtÄ±rma TasarÄ±m Rehberi" data-en="Quantitative Research Design Guide">Nicel AraÅŸtÄ±rma TasarÄ±m Rehberi</h2><p class="text-gray-500" data-tr="Ä°statistiksel analiz gerektiren Ã§alÄ±ÅŸmalarÄ±nÄ±z iÃ§in desen seÃ§in." data-en="Choose a design for studies requiring statistical analysis.">Ä°statistiksel analiz gerektiren Ã§alÄ±ÅŸmalarÄ±nÄ±z iÃ§in desen seÃ§in.</p></div><div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-8"><div onclick="showQuantitativeDetail('experimental')" class="design-card bg-white p-4 rounded-xl text-center shadow-sm hover:shadow-md transition cursor-pointer border-2 border-transparent" id="card-experimental"><div class="text-3xl mb-2">ğŸ§ª</div><div class="text-xs font-bold text-gray-700" data-tr="Deneysel" data-en="Experimental">Deneysel</div></div><div onclick="showQuantitativeDetail('correlational')" class="design-card bg-white p-4 rounded-xl text-center shadow-sm hover:shadow-md transition cursor-pointer border-2 border-transparent" id="card-correlational"><div class="text-3xl mb-2">ğŸ“ˆ</div><div class="text-xs font-bold text-gray-700" data-tr="Ä°liÅŸkisel" data-en="Correlational">Ä°liÅŸkisel</div></div><div onclick="showQuantitativeDetail('survey')" class="design-card bg-white p-4 rounded-xl text-center shadow-sm hover:shadow-md transition cursor-pointer border-2 border-transparent" id="card-survey"><div class="text-3xl mb-2">ğŸ“‹</div><div class="text-xs font-bold text-gray-700" data-tr="Tarama (Survey)" data-en="Survey">Tarama (Survey)</div></div></div><div id="quant-detail-area" class="bg-white card rounded-xl p-6 sm:p-10 hidden"><div class="flex items-center gap-4 mb-6 pb-4 border-b"><div id="quant-icon" class="text-5xl"></div><div><h3 id="quant-title" class="text-2xl font-bold text-indigo-700"></h3><p id="quant-desc" class="text-gray-600 text-sm italic"></p></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="space-y-6"><div class="bg-green-50 p-4 rounded-lg border border-green-100"><h4 class="font-bold text-green-800 text-sm uppercase mb-2" data-tr="Ã–nerilen Ã–rneklem" data-en="Recommended Sample">Ã–nerilen Ã–rneklem</h4><p id="quant-sample" class="text-xl font-bold text-green-600"></p></div><div><h4 class="font-bold text-gray-700 mb-2" data-tr="Odak NoktasÄ±" data-en="Focus">Odak NoktasÄ±</h4><p id="quant-focus" class="text-sm text-gray-600"></p></div></div><div class="space-y-6"><div><h4 class="font-bold text-gray-700 mb-2" data-tr="YÃ¶ntemler" data-en="Methods">YÃ¶ntemler</h4><ul id="quant-methods" class="list-disc list-inside text-sm text-gray-600 space-y-1"></ul></div><div class="bg-yellow-50 p-4 rounded-lg border border-yellow-100"><h4 class="font-bold text-yellow-800 text-sm mb-2" data-tr="PÃ¼f NoktasÄ±" data-en="Key Tip">PÃ¼f NoktasÄ±</h4><p id="quant-tip" class="text-sm text-yellow-700"></p></div></div></div></div><div id="quant-placeholder-msg" class="text-center py-12 text-gray-400"><div class="text-4xl mb-2">ğŸ‘†</div><p data-tr="DetaylarÄ± gÃ¶rmek iÃ§in yukarÄ±dan bir desen seÃ§in." data-en="Select a design above to see details.">DetaylarÄ± gÃ¶rmek iÃ§in yukarÄ±dan bir desen seÃ§in.</p></div>
                </div>

                <!-- 9. VIEW: KARMA ARAÅTIRMA -->
                <div id="view-mixed" class="view-section hidden">
                    <div class="text-center mb-8"><h2 class="text-3xl font-extrabold text-gray-800 mb-2" data-tr="Karma AraÅŸtÄ±rma TasarÄ±m Rehberi" data-en="Mixed Research Design Guide">Karma AraÅŸtÄ±rma TasarÄ±m Rehberi</h2><p class="text-gray-500" data-tr="Nitel ve nicel verilerin birlikte kullanÄ±ldÄ±ÄŸÄ± desenleri keÅŸfedin." data-en="Explore designs where qualitative and quantitative data are used together.">Nitel ve nicel verilerin birlikte kullanÄ±ldÄ±ÄŸÄ± desenleri keÅŸfedin.</p></div><div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-8"><div onclick="showMixedDetail('convergent')" class="design-card bg-white p-4 rounded-xl text-center shadow-sm hover:shadow-md transition cursor-pointer border-2 border-transparent" id="card-convergent"><div class="text-3xl mb-2">ğŸ”€</div><div class="text-xs font-bold text-gray-700" data-tr="YakÄ±nsayan Paralel" data-en="Convergent Parallel">YakÄ±nsayan Paralel</div></div><div onclick="showMixedDetail('explanatory')" class="design-card bg-white p-4 rounded-xl text-center shadow-sm hover:shadow-md transition cursor-pointer border-2 border-transparent" id="card-explanatory"><div class="text-3xl mb-2">â¡ï¸</div><div class="text-xs font-bold text-gray-700" data-tr="AÃ§Ä±klayÄ±cÄ± SÄ±ralÄ±" data-en="Explanatory Sequential">AÃ§Ä±klayÄ±cÄ± SÄ±ralÄ±</div></div><div onclick="showMixedDetail('exploratory')" class="design-card bg-white p-4 rounded-xl text-center shadow-sm hover:shadow-md transition cursor-pointer border-2 border-transparent" id="card-exploratory"><div class="text-3xl mb-2">ğŸ’¡</div><div class="text-xs font-bold text-gray-700" data-tr="KeÅŸfedici SÄ±ralÄ±" data-en="Exploratory Sequential">KeÅŸfedici SÄ±ralÄ±</div></div></div><div id="mixed-detail-area" class="bg-white card rounded-xl p-6 sm:p-10 hidden"><div class="flex items-center gap-4 mb-6 pb-4 border-b"><div id="mixed-icon" class="text-5xl"></div><div><h3 id="mixed-title" class="text-2xl font-bold text-indigo-700"></h3><p id="mixed-desc" class="text-gray-600 text-sm italic"></p></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="space-y-6"><div class="bg-purple-50 p-4 rounded-lg border border-purple-100"><h4 class="font-bold text-purple-800 text-sm uppercase mb-2" data-tr="SÃ¼reÃ§" data-en="Process">SÃ¼reÃ§</h4><p id="mixed-process" class="text-sm font-medium text-purple-700"></p></div><div><h4 class="font-bold text-gray-700 mb-2" data-tr="Odak NoktasÄ±" data-en="Focus">Odak NoktasÄ±</h4><p id="mixed-focus" class="text-sm text-gray-600"></p></div></div><div class="space-y-6"><div><h4 class="font-bold text-gray-700 mb-2" data-tr="Entegrasyon" data-en="Integration">Entegrasyon</h4><p id="mixed-integration" class="text-sm text-gray-600"></p></div><div class="bg-yellow-50 p-4 rounded-lg border border-yellow-100"><h4 class="font-bold text-yellow-800 text-sm mb-2" data-tr="PÃ¼f NoktasÄ±" data-en="Key Tip">PÃ¼f NoktasÄ±</h4><p id="mixed-tip" class="text-sm text-yellow-700"></p></div></div></div></div><div id="mixed-placeholder-msg" class="text-center py-12 text-gray-400"><div class="text-4xl mb-2">ğŸ‘†</div><p data-tr="DetaylarÄ± gÃ¶rmek iÃ§in yukarÄ±dan bir desen seÃ§in." data-en="Select a design above to see details.">DetaylarÄ± gÃ¶rmek iÃ§in yukarÄ±dan bir desen seÃ§in.</p></div>
                </div>

                <!-- 10. VIEW: PRISMA SAYACI (YENÄ° EKLENDÄ°) -->
                <div id="view-prisma" class="view-section hidden">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-extrabold text-gray-800 mb-2" data-tr="PRISMA AkÄ±ÅŸ ÅemasÄ± SayacÄ±" data-en="PRISMA Flow Diagram Counter">PRISMA AkÄ±ÅŸ ÅemasÄ± SayacÄ±</h2>
                        <p class="text-gray-500" data-tr="Sistematik derleme ve meta-analiz iÃ§in kayÄ±t sayÄ±larÄ±nÄ± takip edin." data-en="Track record numbers for systematic reviews and meta-analyses.">Sistematik derleme ve meta-analiz iÃ§in kayÄ±t sayÄ±larÄ±nÄ± takip edin.</p>
                    </div>
                    <div class="bg-white card rounded-xl p-6 sm:p-10 max-w-4xl mx-auto">
                         <div class="grid grid-cols-1 md:grid-cols-2 gap-8 relative">
                             <!-- Step 1: Identification -->
                             <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                 <h4 class="font-bold text-blue-800 mb-3 text-sm uppercase">1. TanÄ±mlama (Identification)</h4>
                                 <div class="space-y-3">
                                     <div>
                                         <label class="block text-xs font-medium text-gray-600 mb-1">VeritabanlarÄ±ndan Gelen KayÄ±tlar</label>
                                         <input type="number" id="prisma_db" class="w-full border rounded p-2 text-sm" placeholder="0" oninput="calculatePRISMA()">
                                     </div>
                                     <div>
                                         <label class="block text-xs font-medium text-gray-600 mb-1">DiÄŸer Kaynaklardan Gelen KayÄ±tlar</label>
                                         <input type="number" id="prisma_other" class="w-full border rounded p-2 text-sm" placeholder="0" oninput="calculatePRISMA()">
                                     </div>
                                 </div>
                             </div>

                             <!-- Step 2: Screening -->
                             <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                                 <h4 class="font-bold text-yellow-800 mb-3 text-sm uppercase">2. Tarama (Screening)</h4>
                                 <div class="space-y-3">
                                     <div>
                                         <label class="block text-xs font-medium text-gray-600 mb-1">Tekrar Eden (Duplicate) KayÄ±tlar</label>
                                         <input type="number" id="prisma_duplicates" class="w-full border rounded p-2 text-sm" placeholder="0" oninput="calculatePRISMA()">
                                     </div>
                                     <div>
                                         <label class="block text-xs font-medium text-gray-600 mb-1">BaÅŸlÄ±k/Ã–zet TaramasÄ±nda Elenenler</label>
                                         <input type="number" id="prisma_screened_excluded" class="w-full border rounded p-2 text-sm" placeholder="0" oninput="calculatePRISMA()">
                                     </div>
                                 </div>
                             </div>

                             <!-- Step 3: Eligibility -->
                             <div class="bg-orange-50 p-4 rounded-lg border border-orange-200">
                                 <h4 class="font-bold text-orange-800 mb-3 text-sm uppercase">3. Uygunluk (Eligibility)</h4>
                                 <div class="space-y-3">
                                     <div>
                                         <label class="block text-xs font-medium text-gray-600 mb-1">UlaÅŸÄ±lamayan Tam Metinler</label>
                                         <input type="number" id="prisma_not_retrieved" class="w-full border rounded p-2 text-sm" placeholder="0" oninput="calculatePRISMA()">
                                     </div>
                                     <div>
                                         <label class="block text-xs font-medium text-gray-600 mb-1">Tam Metin Ä°ncelemesinde Elenenler</label>
                                         <input type="number" id="prisma_full_excluded" class="w-full border rounded p-2 text-sm" placeholder="0" oninput="calculatePRISMA()">
                                     </div>
                                 </div>
                             </div>

                             <!-- Step 4: Included -->
                             <div class="bg-green-50 p-4 rounded-lg border border-green-200 flex flex-col justify-center items-center">
                                 <h4 class="font-bold text-green-800 mb-3 text-sm uppercase">4. Dahil Edilen (Included)</h4>
                                 <div class="text-center">
                                     <p class="text-sm text-green-600 mb-1">Ã‡alÄ±ÅŸmaya Dahil Edilenler</p>
                                     <p id="prisma_final" class="text-5xl font-extrabold text-green-700">0</p>
                                 </div>
                             </div>
                         </div>
                         
                         <!-- Summary Text -->
                         <div class="mt-8 bg-gray-50 p-4 rounded-lg border border-gray-200">
                             <h4 class="font-bold text-gray-700 text-xs uppercase mb-2">Otomatik Ã–zet Metni</h4>
                             <p id="prisma_summary" class="text-sm text-gray-600 italic">Veri giriÅŸi bekleniyor...</p>
                         </div>
                    </div>
                </div>

                <!-- 11. VIEW: PICO OLUÅTURUCU (YENÄ° EKLENDÄ°) -->
                <div id="view-pico" class="view-section hidden">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-extrabold text-gray-800 mb-2" data-tr="PICO Soru OluÅŸturucu" data-en="PICO Question Generator">PICO Soru OluÅŸturucu</h2>
                        <p class="text-gray-500" data-tr="AraÅŸtÄ±rma sorunuzu yapÄ±landÄ±rmak iÃ§in PICO bileÅŸenlerini kullanÄ±n." data-en="Use PICO components to structure your research question.">AraÅŸtÄ±rma sorunuzu yapÄ±landÄ±rmak iÃ§in PICO bileÅŸenlerini kullanÄ±n.</p>
                    </div>
                    <div class="bg-white card rounded-xl p-6 sm:p-10 max-w-3xl mx-auto">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-xs font-bold text-indigo-600 mb-1">P - Population (PopÃ¼lasyon)</label>
                                <input type="text" id="pico_p" class="w-full border rounded p-3 focus:ring-2 focus:ring-indigo-500" placeholder="Ã–rn: Tip 2 diyabetli hastalar">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-indigo-600 mb-1">I - Intervention (MÃ¼dahale)</label>
                                <input type="text" id="pico_i" class="w-full border rounded p-3 focus:ring-2 focus:ring-indigo-500" placeholder="Ã–rn: DÃ¼zenli egzersiz programÄ±">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-indigo-600 mb-1">C - Comparison (KarÅŸÄ±laÅŸtÄ±rma)</label>
                                <input type="text" id="pico_c" class="w-full border rounded p-3 focus:ring-2 focus:ring-indigo-500" placeholder="Ã–rn: Standart bakÄ±m">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-indigo-600 mb-1">O - Outcome (SonuÃ§)</label>
                                <input type="text" id="pico_o" class="w-full border rounded p-3 focus:ring-2 focus:ring-indigo-500" placeholder="Ã–rn: Kan ÅŸekeri kontrolÃ¼">
                            </div>
                        </div>
                        <button onclick="generatePICO()" class="w-full bg-indigo-600 text-white py-3 rounded-lg font-bold hover:bg-indigo-700 transition" data-tr="Soru OluÅŸtur" data-en="Generate Question">Soru OluÅŸtur</button>
                        
                        <div id="pico_result" class="mt-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg hidden">
                            <p class="font-serif text-lg text-gray-800 text-center italic" id="pico_question"></p>
                        </div>
                    </div>
                </div>

                <!-- 12. VIEW: RASTGELE ATAMA (YENÄ° EKLENDÄ°) -->
                <div id="view-randomizer" class="view-section hidden">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-extrabold text-gray-800 mb-2" data-tr="Rastgele Atama AracÄ±" data-en="Random Assignment Tool">Rastgele Atama AracÄ±</h2>
                        <p class="text-gray-500" data-tr="KatÄ±lÄ±mcÄ±larÄ± gruplara yansÄ±z (random) olarak atayÄ±n." data-en="Randomly assign participants to groups.">KatÄ±lÄ±mcÄ±larÄ± gruplara yansÄ±z (random) olarak atayÄ±n.</p>
                    </div>
                    <div class="bg-white card rounded-xl p-6 sm:p-10 max-w-2xl mx-auto">
                        <div class="space-y-4 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1" data-tr="Toplam KatÄ±lÄ±mcÄ± SayÄ±sÄ± (N)" data-en="Total Participants (N)">Toplam KatÄ±lÄ±mcÄ± SayÄ±sÄ± (N)</label>
                                <input type="number" id="rand_n" class="w-full border rounded p-2" placeholder="Ã–rn: 60">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1" data-tr="Grup Ä°simleri (VirgÃ¼lle ayÄ±rÄ±n)" data-en="Group Names (Comma separated)">Grup Ä°simleri (VirgÃ¼lle ayÄ±rÄ±n)</label>
                                <input type="text" id="rand_groups" class="w-full border rounded p-2" placeholder="Deney, Kontrol, Plasebo">
                            </div>
                        </div>
                        <button onclick="randomizeGroups()" class="w-full bg-indigo-600 text-white py-3 rounded-lg font-bold hover:bg-indigo-700 transition" data-tr="Ata" data-en="Assign">Ata</button>
                        
                        <div id="rand_result_area" class="mt-6 hidden">
                            <h4 class="font-bold text-gray-700 mb-2" data-tr="Atama Listesi" data-en="Assignment List">Atama Listesi</h4>
                            <div class="bg-gray-50 p-4 rounded border max-h-64 overflow-y-auto font-mono text-sm" id="rand_list"></div>
                        </div>
                    </div>
                </div>

                <!-- 13. VIEW: SENTEZ ARAÅTIRMALARI (YENÄ° EKLENDÄ°) -->
                <div id="view-synthesis" class="view-section hidden">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-extrabold text-gray-800 mb-2" data-tr="Sentez AraÅŸtÄ±rmalarÄ± Rehberi" data-en="Synthesis Research Guide">Sentez AraÅŸtÄ±rmalarÄ± Rehberi</h2>
                        <p class="text-gray-500" data-tr="Mevcut araÅŸtÄ±rmalarÄ± birleÅŸtirerek yeni sonuÃ§lara ulaÅŸÄ±n." data-en="Combine existing research to reach new conclusions.">Mevcut araÅŸtÄ±rmalarÄ± birleÅŸtirerek yeni sonuÃ§lara ulaÅŸÄ±n.</p>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-8">
                        <div onclick="showSynthesisDetail('meta-analysis')" class="design-card bg-white p-4 rounded-xl text-center shadow-sm hover:shadow-md transition cursor-pointer border-2 border-transparent" id="card-meta-analysis"><div class="text-3xl mb-2">ğŸ“Š</div><div class="text-xs font-bold text-gray-700" data-tr="Meta-Analiz" data-en="Meta-Analysis">Meta-Analiz</div></div>
                        <div onclick="showSynthesisDetail('meta-synthesis')" class="design-card bg-white p-4 rounded-xl text-center shadow-sm hover:shadow-md transition cursor-pointer border-2 border-transparent" id="card-meta-synthesis"><div class="text-3xl mb-2">ğŸ§¶</div><div class="text-xs font-bold text-gray-700" data-tr="Meta-Sentez" data-en="Meta-Synthesis">Meta-Sentez</div></div>
                    </div>
                    <div id="synthesis-detail-area" class="bg-white card rounded-xl p-6 sm:p-10 hidden"><div class="flex items-center gap-4 mb-6 pb-4 border-b"><div id="synthesis-icon" class="text-5xl"></div><div><h3 id="synthesis-title" class="text-2xl font-bold text-indigo-700"></h3><p id="synthesis-desc" class="text-gray-600 text-sm italic"></p></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="space-y-6"><div class="bg-teal-50 p-4 rounded-lg border border-teal-100"><h4 class="font-bold text-teal-800 text-sm uppercase mb-2" data-tr="Ã–nerilen Ã‡alÄ±ÅŸma SayÄ±sÄ±" data-en="Recommended Number of Studies">Ã–nerilen Ã‡alÄ±ÅŸma SayÄ±sÄ±</h4><p id="synthesis-sample" class="text-xl font-bold text-teal-600"></p></div><div><h4 class="font-bold text-gray-700 mb-2" data-tr="Odak NoktasÄ±" data-en="Focus">Odak NoktasÄ±</h4><p id="synthesis-focus" class="text-sm text-gray-600"></p></div></div><div class="space-y-6"><div><h4 class="font-bold text-gray-700 mb-2" data-tr="YÃ¶ntemler" data-en="Methods">YÃ¶ntemler</h4><ul id="synthesis-methods" class="list-disc list-inside text-sm text-gray-600 space-y-1"></ul></div><div class="bg-yellow-50 p-4 rounded-lg border border-yellow-100"><h4 class="font-bold text-yellow-800 text-sm mb-2" data-tr="PÃ¼f NoktasÄ±" data-en="Key Tip">PÃ¼f NoktasÄ±</h4><p id="synthesis-tip" class="text-sm text-yellow-700"></p></div></div></div></div><div id="synthesis-placeholder-msg" class="text-center py-12 text-gray-400"><div class="text-4xl mb-2">ğŸ‘†</div><p data-tr="DetaylarÄ± gÃ¶rmek iÃ§in yukarÄ±dan bir desen seÃ§in." data-en="Select a design above to see details.">DetaylarÄ± gÃ¶rmek iÃ§in yukarÄ±dan bir desen seÃ§in.</p></div>
                </div>

            </div>
        </div>
    </main>

    <script>
        // --- MULTI-APP NAVIGATION LOGIC ---
        function switchView(viewName) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            const targetView = document.getElementById('view-' + viewName);
            if (targetView) targetView.classList.remove('hidden');
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            const activeNav = document.getElementById('nav-' + viewName);
            if (activeNav) activeNav.classList.add('active');
        }

        // --- GLOBAL TRANSLATIONS & STATE ---
        const translations = {
            tr: {
                title: "Akademik SuperApp",
                "Pearson r BirleÅŸtirici": "Pearson r BirleÅŸtirici",
                "Etki BÃ¼yÃ¼klÃ¼ÄŸÃ¼": "Etki BÃ¼yÃ¼klÃ¼ÄŸÃ¼",
                "Ã–rneklem HesaplayÄ±cÄ±": "Ã–rneklem HesaplayÄ±cÄ±",
                "Normallik Testi": "Normallik Testi",
                "APA 7 OluÅŸturucu": "APA 7 OluÅŸturucu",
                "Ã–zet KontrolÃ¼": "Ã–zet KontrolÃ¼",
                "PRISMA SayacÄ±": "PRISMA SayacÄ±",
                "PICO OluÅŸturucu": "PICO OluÅŸturucu",
                "Rastgele Atama": "Rastgele Atama",
                "Veri Analizi": "Veri Analizi",
                "YazÄ±m & Referans": "YazÄ±m & Referans",
                "AraÅŸtÄ±rma SÃ¼reci": "AraÅŸtÄ±rma SÃ¼reci",
                "AraÅŸtÄ±rma TÃ¼rleri": "AraÅŸtÄ±rma TÃ¼rleri",
                "Nitel AraÅŸtÄ±rma": "Nitel AraÅŸtÄ±rma",
                "Nicel AraÅŸtÄ±rma": "Nicel AraÅŸtÄ±rma",
                "Karma AraÅŸtÄ±rma": "Karma AraÅŸtÄ±rma",
                "Sentez Ã‡alÄ±ÅŸmalarÄ±": "Sentez Ã‡alÄ±ÅŸmalarÄ±",
                
                // ... (Pearson Keys are preserved) ...
                pearson_title: "Pearson r BirleÅŸtirici",
                pearson_desc: "Fisher'Ä±n Z DÃ¶nÃ¼ÅŸÃ¼mÃ¼ ile aÄŸÄ±rlÄ±klÄ± ortalama korelasyon hesaplama aracÄ±.",
                sec_input: "Alt Boyut ve r KatsayÄ±sÄ±",
                sec_list: "Girilen Veriler ve SonuÃ§",
                lbl_subscale: "Alt Boyut AdÄ±:",
                ph_subscale: "Alt boyut adÄ±",
                err_subscale: "LÃ¼tfen alt boyutun adÄ±nÄ± girin.",
                lbl_r: "Korelasyon KatsayÄ±sÄ± (r):",
                ph_r: "-1.0 ile 1.0 arasÄ±nda",
                err_r: "GeÃ§ersiz r deÄŸeri.",
                lbl_n: "Ã–rneklem BÃ¼yÃ¼klÃ¼ÄŸÃ¼ (n):",
                ph_n: "Min 3",
                err_n: "GeÃ§ersiz n deÄŸeri.",
                btn_lock: "Sabitle",
                btn_add: "Alt Boyutu Ekle",
                ph_list_empty: "Liste boÅŸ.",
                btn_calc: "BirleÅŸtirilmiÅŸ r'yi Hesapla",
                btn_clear: "Temizle",
                sec_result: "SonuÃ§",
                lbl_combined: "BirleÅŸik r:",
                btn_copy: "Kopyala",
                lbl_avg_z: "Ortalama Z:",
                sec_history: "GeÃ§miÅŸ KayÄ±tlar",
                btn_clear_hist: "GeÃ§miÅŸi Sil",
                btn_load: "YÃ¼kle",
                btn_share: "PaylaÅŸ",
                ph_history: "HenÃ¼z geÃ§miÅŸ kayÄ±t yok.",
                msg_copied: "KopyalandÄ±!",
                msg_share_copied: "PaylaÅŸÄ±m linki kopyalandÄ±!",
                msg_url_loaded: "Linkten veri yÃ¼klendi.",
                msg_url_err: "Link hatasÄ±.",
                msg_min_entry: "En az 2 veri gerekli.",
                msg_locked: (n) => `N=${n} kilitli.`,
                msg_unlocked: "Kilit aÃ§Ä±ldÄ±.",
                msg_added: (t,n) => `Eklendi: ${t} (N=${n})`,
                msg_removed: "Silindi.",
                msg_cleared: "Temizlendi.",

                // New Tools
                "1. Grup (Deney)": "1. Grup (Deney)",
                "2. Grup (Kontrol)": "2. Grup (Kontrol)",
                "Hesapla": "Hesapla",
                "Yorum:": "Yorum:",
                "Evren BÃ¼yÃ¼klÃ¼ÄŸÃ¼ (N) - Ä°steÄŸe BaÄŸlÄ±": "Evren BÃ¼yÃ¼klÃ¼ÄŸÃ¼ (N) - Ä°steÄŸe BaÄŸlÄ±",
                "Sonsuz evren iÃ§in boÅŸ bÄ±rakÄ±n": "Sonsuz evren iÃ§in boÅŸ bÄ±rakÄ±n",
                "GÃ¼ven AralÄ±ÄŸÄ± (Confidence Level)": "GÃ¼ven AralÄ±ÄŸÄ± (Confidence Level)",
                "Hata PayÄ± (Margin of Error - %)": "Hata PayÄ± (%)",
                "Gerekli Ã–rneklem BÃ¼yÃ¼klÃ¼ÄŸÃ¼:": "Gerekli Ã–rneklem BÃ¼yÃ¼klÃ¼ÄŸÃ¼:",
                "Normallik Testi YorumlayÄ±cÄ±": "Normallik Testi YorumlayÄ±cÄ±",
                "Ã‡arpÄ±klÄ±k ve BasÄ±klÄ±k deÄŸerlerine gÃ¶re daÄŸÄ±lÄ±mÄ±n normalliÄŸini test edin.": "Ã‡arpÄ±klÄ±k ve BasÄ±klÄ±k deÄŸerlerine gÃ¶re daÄŸÄ±lÄ±mÄ±n normalliÄŸini test edin.",
                "Ã‡arpÄ±klÄ±k (Skewness)": "Ã‡arpÄ±klÄ±k",
                "Std. Hata (Skewness Error)": "Std. Hata",
                "BasÄ±klÄ±k (Kurtosis)": "BasÄ±klÄ±k",
                "Std. Hata (Kurtosis Error)": "Std. Hata",
                "Analiz Et": "Analiz Et",
                "Ã‡arpÄ±klÄ±k Z-Skoru:": "Ã‡arpÄ±klÄ±k Z-Skoru:",
                "BasÄ±klÄ±k Z-Skoru:": "BasÄ±klÄ±k Z-Skoru:",
                "Kriter: Z deÄŸerinin -1.96 ile +1.96 arasÄ±nda olmasÄ± (p > .05)": "Kriter: Z deÄŸerinin -1.96 ile +1.96 arasÄ±nda olmasÄ± (p > .05)",
                "DaÄŸÄ±lÄ±m Normal": "DaÄŸÄ±lÄ±m Normal",
                "DaÄŸÄ±lÄ±m Normal DeÄŸil": "DaÄŸÄ±lÄ±m Normal DeÄŸil",
                "Ä°hmal Edilebilir": "Ä°hmal Edilebilir",
                "KÃ¼Ã§Ã¼k Etki": "KÃ¼Ã§Ã¼k Etki",
                "Orta Etki": "Orta Etki",
                "GeniÅŸ Etki": "GeniÅŸ Etki",
                "Ã‡ok GeniÅŸ Etki": "Ã‡ok GeniÅŸ Etki",
                // APA
                "APA 7 KaynakÃ§a OluÅŸturucu": "APA 7 KaynakÃ§a OluÅŸturucu",
                "Kitap, makale ve web siteleri iÃ§in hÄ±zlÄ±ca APA 7 formatÄ±nda kaynakÃ§a oluÅŸturun.": "Kitap, makale ve web siteleri iÃ§in hÄ±zlÄ±ca APA 7 formatÄ±nda kaynakÃ§a oluÅŸturun.",
                "Yazar SoyadÄ±, AdÄ±nÄ±n BaÅŸ Harfi (Ã–rn: YÄ±lmaz, A.)": "Yazar SoyadÄ±, AdÄ±nÄ±n BaÅŸ Harfi (Ã–rn: YÄ±lmaz, A.)",
                "YÄ±l (Parantez iÃ§i)": "YÄ±l (Parantez iÃ§i)",
                "Eser BaÅŸlÄ±ÄŸÄ±": "Eser BaÅŸlÄ±ÄŸÄ±",
                "YayÄ±nevi": "YayÄ±nevi",
                "Dergi AdÄ±": "Dergi AdÄ±",
                "Cilt (Volume)": "Cilt (Volume)",
                "SayÄ± (Issue)": "SayÄ± (Issue)",
                "Sayfa AralÄ±ÄŸÄ±": "Sayfa AralÄ±ÄŸÄ±",
                "Site AdÄ±": "Site AdÄ±",
                "OluÅŸtur": "OluÅŸtur",
                "SonuÃ§ (Kopyalamak iÃ§in tÄ±klayÄ±n):": "SonuÃ§ (Kopyalamak iÃ§in tÄ±klayÄ±n):",
                "Kopyala": "Kopyala",
                // Abstract
                "Ã–zet (Abstract) KontrolcÃ¼sÃ¼": "Ã–zet (Abstract) KontrolcÃ¼sÃ¼",
                "Makale Ã¶zetinizin kelime ve karakter sÄ±nÄ±rlarÄ±nÄ± anlÄ±k olarak kontrol edin.": "Makale Ã¶zetinizin kelime ve karakter sÄ±nÄ±rlarÄ±nÄ± anlÄ±k olarak kontrol edin.",
                "Kelime": "Kelime",
                "Kelime SayÄ±sÄ±": "Kelime SayÄ±sÄ±",
                "Karakter (BoÅŸluklu)": "Karakter (BoÅŸluklu)",
                "CÃ¼mle SayÄ±sÄ±": "CÃ¼mle SayÄ±sÄ±",
                "Ä°pucu:": "Ä°pucu:",
                "Genellikle Ã¶zetler 150-250 kelime arasÄ±nda olmalÄ±dÄ±r. Dergi kurallarÄ±nÄ± kontrol ediniz.": "Genellikle Ã¶zetler 150-250 kelime arasÄ±nda olmalÄ±dÄ±r. Dergi kurallarÄ±nÄ± kontrol ediniz.",
                // Research Types
                "Nitel AraÅŸtÄ±rma TasarÄ±m Rehberi": "Nitel AraÅŸtÄ±rma TasarÄ±m Rehberi",
                "AraÅŸtÄ±rmanÄ±z iÃ§in en uygun nitel deseni seÃ§in ve detaylarÄ± inceleyin.": "AraÅŸtÄ±rmanÄ±z iÃ§in en uygun nitel deseni seÃ§in ve detaylarÄ± inceleyin.",
                "Fenomenoloji": "Fenomenoloji",
                "Durum Ã‡alÄ±ÅŸmasÄ±": "Durum Ã‡alÄ±ÅŸmasÄ±",
                "GÃ¶mÃ¼lÃ¼ Teori": "GÃ¶mÃ¼lÃ¼ Teori",
                "Etnografi": "Etnografi",
                "AnlatÄ±": "AnlatÄ±",
                "Ã–nerilen Ã–rneklem (Creswell)": "Ã–nerilen Ã–rneklem (Creswell)",
                "KatÄ±lÄ±mcÄ± SayÄ±sÄ±": "KatÄ±lÄ±mcÄ± SayÄ±sÄ±",
                "Odak NoktasÄ±": "Odak NoktasÄ±",
                "Veri Toplama AraÃ§larÄ±": "Veri Toplama AraÃ§larÄ±",
                "PÃ¼f NoktasÄ±": "PÃ¼f NoktasÄ±",
                "DetaylarÄ± gÃ¶rmek iÃ§in yukarÄ±dan bir desen seÃ§in.": "DetaylarÄ± gÃ¶rmek iÃ§in yukarÄ±dan bir desen seÃ§in.",
                "Nicel AraÅŸtÄ±rma TasarÄ±m Rehberi": "Nicel AraÅŸtÄ±rma TasarÄ±m Rehberi",
                "Ä°statistiksel analiz gerektiren Ã§alÄ±ÅŸmalarÄ±nÄ±z iÃ§in desen seÃ§in.": "Ä°statistiksel analiz gerektiren Ã§alÄ±ÅŸmalarÄ±nÄ±z iÃ§in desen seÃ§in.",
                "Deneysel": "Deneysel",
                "Ä°liÅŸkisel": "Ä°liÅŸkisel",
                "Tarama (Survey)": "Tarama (Survey)",
                "Ã–nerilen Ã–rneklem": "Ã–nerilen Ã–rneklem",
                "YÃ¶ntemler": "YÃ¶ntemler",
                "Karma AraÅŸtÄ±rma TasarÄ±m Rehberi": "Karma AraÅŸtÄ±rma TasarÄ±m Rehberi",
                "Nitel ve nicel verilerin birlikte kullanÄ±ldÄ±ÄŸÄ± desenleri keÅŸfedin.": "Nitel ve nicel verilerin birlikte kullanÄ±ldÄ±ÄŸÄ± desenleri keÅŸfedin.",
                "YakÄ±nsayan Paralel": "YakÄ±nsayan Paralel",
                "AÃ§Ä±klayÄ±cÄ± SÄ±ralÄ±": "AÃ§Ä±klayÄ±cÄ± SÄ±ralÄ±",
                "KeÅŸfedici SÄ±ralÄ±": "KeÅŸfedici SÄ±ralÄ±",
                "SÃ¼reÃ§": "SÃ¼reÃ§",
                "Entegrasyon": "Entegrasyon",
                "Sentez AraÅŸtÄ±rmalarÄ± Rehberi": "Sentez AraÅŸtÄ±rmalarÄ± Rehberi",
                "Mevcut araÅŸtÄ±rmalarÄ± birleÅŸtirerek yeni sonuÃ§lara ulaÅŸÄ±n.": "Mevcut araÅŸtÄ±rmalarÄ± birleÅŸtirerek yeni sonuÃ§lara ulaÅŸÄ±n.",
                "Meta-Analiz": "Meta-Analiz",
                "Meta-Sentez": "Meta-Sentez",
                "Ã–nerilen Ã‡alÄ±ÅŸma SayÄ±sÄ±": "Ã–nerilen Ã‡alÄ±ÅŸma SayÄ±sÄ±",
                // Research Process (NEW)
                "PRISMA AkÄ±ÅŸ ÅemasÄ± SayacÄ±": "PRISMA AkÄ±ÅŸ ÅemasÄ± SayacÄ±",
                "Sistematik derleme ve meta-analiz iÃ§in kayÄ±t sayÄ±larÄ±nÄ± takip edin.": "Sistematik derleme ve meta-analiz iÃ§in kayÄ±t sayÄ±larÄ±nÄ± takip edin.",
                "PICO Soru OluÅŸturucu": "PICO Soru OluÅŸturucu",
                "AraÅŸtÄ±rma sorunuzu yapÄ±landÄ±rmak iÃ§in PICO bileÅŸenlerini kullanÄ±n.": "AraÅŸtÄ±rma sorunuzu yapÄ±landÄ±rmak iÃ§in PICO bileÅŸenlerini kullanÄ±n.",
                "Rastgele Atama AracÄ±": "Rastgele Atama AracÄ±",
                "KatÄ±lÄ±mcÄ±larÄ± gruplara yansÄ±z (random) olarak atayÄ±n.": "KatÄ±lÄ±mcÄ±larÄ± gruplara yansÄ±z (random) olarak atayÄ±n.",
                "Soru OluÅŸtur": "Soru OluÅŸtur",
                "Ata": "Assign",
                "Atama Listesi": "Atama Listesi",
                "Toplam KatÄ±lÄ±mcÄ± SayÄ±sÄ± (N)": "Toplam KatÄ±lÄ±mcÄ± SayÄ±sÄ± (N)",
                "Grup Ä°simleri (VirgÃ¼lle ayÄ±rÄ±n)": "Grup Ä°simleri (VirgÃ¼lle ayÄ±rÄ±n)",
                "Otomatik Ã–zet Metni": "Otomatik Ã–zet Metni"
            },
            en: {
                title: "Academic SuperApp",
                "Pearson r Combiner": "Pearson r Combiner",
                "Effect Size Calculator": "Effect Size Calculator",
                "Sample Size Calculator": "Sample Size Calculator",
                "Normality Test": "Normality Test",
                "APA 7 Generator": "APA 7 Generator",
                "Abstract Checker": "Abstract Checker",
                "PRISMA Counter": "PRISMA Counter",
                "PICO Generator": "PICO Generator",
                "Randomizer": "Randomizer",
                "Data Analysis": "Data Analysis",
                "Writing & Reference": "Writing & Reference",
                "Research Process": "Research Process",
                "Research Types": "Research Types",
                "Qualitative Research": "Qualitative Research",
                "Quantitative Research": "Quantitative Research",
                "Mixed Research": "Mixed Research",
                "Synthesis Studies": "Synthesis Studies",

                // ... (Pearson Keys are preserved) ...
                pearson_title: "Pearson r Combiner",
                pearson_desc: "Weighted average correlation calculation tool using Fisher's Z-Transformation.",
                sec_input: "Subscale & r Value",
                sec_list: "Entries & Result",
                lbl_subscale: "Subscale Name:",
                ph_subscale: "Subscale name",
                err_subscale: "Enter subscale name.",
                lbl_r: "Correlation (r):",
                ph_r: "Between -1.0 and 1.0",
                err_r: "Invalid r value.",
                lbl_n: "Sample Size (n):",
                ph_n: "Min 3",
                err_n: "Invalid n value.",
                btn_lock: "Lock",
                btn_add: "Add Entry",
                ph_list_empty: "List is empty.",
                btn_calc: "Calculate Combined r",
                btn_clear: "Clear",
                sec_result: "Result",
                lbl_combined: "Combined r:",
                btn_copy: "Copy",
                lbl_avg_z: "Avg Z:",
                sec_history: "History",
                btn_clear_hist: "Clear History",
                btn_load: "Load",
                btn_share: "Share",
                ph_history: "No history yet.",
                msg_copied: "Copied!",
                msg_share_copied: "Share link copied!",
                msg_url_loaded: "Data loaded from link.",
                msg_url_err: "Link error.",
                msg_min_entry: "Need at least 2 entries.",
                msg_locked: (n) => `N=${n} locked.`,
                msg_unlocked: "Unlocked.",
                msg_added: (t,n) => `Added: ${t} (N=${n})`,
                msg_removed: "Removed.",
                msg_cleared: "Cleared.",

                // New Tools
                "1. Grup (Deney)": "Group 1 (Experiment)",
                "2. Grup (Kontrol)": "Group 2 (Control)",
                "Hesapla": "Calculate",
                "Yorum:": "Interpretation:",
                "Evren BÃ¼yÃ¼klÃ¼ÄŸÃ¼ (N) - Ä°steÄŸe BaÄŸlÄ±": "Population Size (N) - Optional",
                "Sonsuz evren iÃ§in boÅŸ bÄ±rakÄ±n": "Leave empty for infinite population",
                "GÃ¼ven AralÄ±ÄŸÄ± (Confidence Level)": "Confidence Level",
                "Hata PayÄ± (Margin of Error - %)": "Margin of Error (%)",
                "Gerekli Ã–rneklem BÃ¼yÃ¼klÃ¼ÄŸÃ¼:": "Required Sample Size:",
                "Normallik Testi YorumlayÄ±cÄ±": "Normality Test Interpreter",
                "Ã‡arpÄ±klÄ±k ve BasÄ±klÄ±k deÄŸerlerine gÃ¶re daÄŸÄ±lÄ±mÄ±n normalliÄŸini test edin.": "Test distribution normality based on Skewness and Kurtosis values.",
                "Ã‡arpÄ±klÄ±k (Skewness)": "Skewness",
                "Std. Hata (Skewness Error)": "Std. Error",
                "BasÄ±klÄ±k (Kurtosis)": "Kurtosis",
                "Std. Hata (Kurtosis Error)": "Std. Error",
                "Analiz Et": "Analyze",
                "Ã‡arpÄ±klÄ±k Z-Skoru:": "Skewness Z-Score:",
                "BasÄ±klÄ±k Z-Skoru:": "Kurtosis Z-Score:",
                "Kriter: Z deÄŸerinin -1.96 ile +1.96 arasÄ±nda olmasÄ± (p > .05)": "Criteria: Z value between -1.96 and +1.96 (p > .05)",
                "DaÄŸÄ±lÄ±m Normal": "Normal Distribution",
                "DaÄŸÄ±lÄ±m Normal DeÄŸil": "Not Normal Distribution",
                "Ä°hmal Edilebilir": "Negligible",
                "KÃ¼Ã§Ã¼k Etki": "Small Effect",
                "Orta Etki": "Medium Effect",
                "GeniÅŸ Etki": "Large Effect",
                "Ã‡ok GeniÅŸ Etki": "Very Large Effect",
                // APA
                "APA 7 KaynakÃ§a OluÅŸturucu": "APA 7 Citation Generator",
                "Kitap, makale ve web siteleri iÃ§in hÄ±zlÄ±ca APA 7 formatÄ±nda kaynakÃ§a oluÅŸturun.": "Quickly create APA 7 formatted citations for books, articles, and websites.",
                "Yazar SoyadÄ±, AdÄ±nÄ±n BaÅŸ Harfi (Ã–rn: YÄ±lmaz, A.)": "Author Last Name, Initial (Ex: Smith, J.)",
                "YÄ±l (Parantez iÃ§i)": "Year",
                "Eser BaÅŸlÄ±ÄŸÄ±": "Title of Work",
                "YayÄ±nevi": "Publisher",
                "Dergi AdÄ±": "Journal Name",
                "Cilt (Volume)": "Volume",
                "SayÄ± (Issue)": "Issue",
                "Sayfa AralÄ±ÄŸÄ±": "Page Range",
                "Site AdÄ±": "Site Name",
                "OluÅŸtur": "Generate",
                "SonuÃ§ (Kopyalamak iÃ§in tÄ±klayÄ±n):": "Result (Click to copy):",
                "Kopyala": "Copy",
                // Abstract
                "Ã–zet (Abstract) KontrolcÃ¼sÃ¼": "Abstract Checker",
                "Makale Ã¶zetinizin kelime ve karakter sÄ±nÄ±rlarÄ±nÄ± anlÄ±k olarak kontrol edin.": "Check word and character limits of your abstract instantly.",
                "Kelime": "Words",
                "Kelime SayÄ±sÄ±": "Word Count",
                "Karakter (BoÅŸluklu)": "Chars (with spaces)",
                "CÃ¼mle SayÄ±sÄ±": "Sentences",
                "Ä°pucu:": "Tip:",
                "Genellikle Ã¶zetler 150-250 kelime arasÄ±nda olmalÄ±dÄ±r. Dergi kurallarÄ±nÄ± kontrol ediniz.": "Abstracts are usually between 150-250 words. Check journal guidelines.",
                // Research Types
                "Qualitative Research Design Guide": "Qualitative Research Design Guide",
                "Choose the best qualitative design for your research and explore the details.": "Choose the best qualitative design for your research and explore the details.",
                "Phenomenology": "Phenomenology",
                "Case Study": "Case Study",
                "Grounded Theory": "Grounded Theory",
                "Ethnography": "Ethnography",
                "Narrative": "Narrative",
                "Recommended Sample (Creswell)": "Recommended Sample (Creswell)",
                "Number of Participants": "Number of Participants",
                "Focus": "Focus",
                "Data Collection Tools": "Data Collection Tools",
                "Key Tip": "Key Tip",
                "Select a design above to see details.": "Select a design above to see details.",
                "Quantitative Research Design Guide": "Quantitative Research Design Guide",
                "Choose a design for studies requiring statistical analysis.": "Choose a design for studies requiring statistical analysis.",
                "Experimental": "Experimental",
                "Correlational": "Correlational",
                "Survey": "Survey",
                "Recommended Sample": "Recommended Sample",
                "Methods": "Methods",
                "Mixed Research Design Guide": "Mixed Research Design Guide",
                "Explore designs where qualitative and quantitative data are used together.": "Explore designs where qualitative and quantitative data are used together.",
                "Convergent Parallel": "Convergent Parallel",
                "Explanatory Sequential": "Explanatory Sequential",
                "Exploratory Sequential": "Exploratory Sequential",
                "Process": "Process",
                "Integration": "Integration",
                "Synthesis Research Guide": "Synthesis Research Guide",
                "Combine existing research to reach new conclusions.": "Combine existing research to reach new conclusions.",
                "Meta-Analysis": "Meta-Analysis",
                "Meta-Synthesis": "Meta-Synthesis",
                "Recommended Number of Studies": "Recommended Number of Studies",
                // Research Process (NEW)
                "PRISMA Flow Diagram Counter": "PRISMA Flow Diagram Counter",
                "Track record numbers for systematic reviews and meta-analyses.": "Track record numbers for systematic reviews and meta-analyses.",
                "PICO Question Generator": "PICO Question Generator",
                "Use PICO components to structure your research question.": "Use PICO components to structure your research question.",
                "Random Assignment Tool": "Random Assignment Tool",
                "Randomly assign participants to groups.": "Randomly assign participants to groups.",
                "Generate Question": "Generate Question",
                "Assign": "Assign",
                "Assignment List": "Assignment List",
                "Total Participants (N)": "Total Participants (N)",
                "Group Names (Comma separated)": "Group Names (Comma separated)",
                "Otomatik Ã–zet Metni": "Automatic Summary Text"
            }
        };

        // --- GLOBAL VARIABLES ---
        let currentLang = 'tr';
        let correlationData = [];
        let isNLocked = false;
        let lockedNValue = null;
        let currentApaType = 'book';
        const HISTORY_KEY = 'pearson_r_history';

        // Elements
        const el = {
            titleInput: document.getElementById('entry_title'),
            rScoreInput: document.getElementById('r_score'),
            nSizeInput: document.getElementById('n_size'),
            nLockButton: document.getElementById('n_lock_button'),
            dataList: document.getElementById('data_list'),
            calcBtn: document.getElementById('calculate_button'),
            resultsArea: document.getElementById('results_area'),
            combinedRText: document.getElementById('combined_r'),
            avgZText: document.getElementById('avg_z'),
            msgArea: document.getElementById('message_area'),
            copyMsgArea: document.getElementById('copy_message_area'),
            histList: document.getElementById('history_list'),
            clearHistBtn: document.getElementById('clear_history_button'),
            langTr: document.getElementById('lang-tr'),
            langEn: document.getElementById('lang-en')
        };

        // Qualitative Data Object
        const qualitativeData = {
            'phenomenology': {
                icon: 'ğŸŒŸ',
                title: { tr: 'Fenomenoloji', en: 'Phenomenology' },
                desc: { tr: 'Bireylerin bir olguya (fenomen) iliÅŸkin yaÅŸanmÄ±ÅŸ deneyimlerini anlamaya odaklanÄ±r.', en: 'Focuses on understanding the lived experiences of individuals regarding a phenomenon.' },
                sample: '5 - 25',
                focus: { tr: 'Ortak bir deneyimin Ã¶zÃ¼.', en: 'The essence of a shared experience.' },
                methods: { tr: ['Derinlemesine GÃ¶rÃ¼ÅŸme', 'GÃ¼nlÃ¼kler', 'Sanat Eserleri'], en: ['In-depth Interviews', 'Diaries', 'Artworks'] },
                tip: { tr: 'KatÄ±lÄ±mcÄ±larÄ±n o deneyimi bizzat yaÅŸamÄ±ÅŸ olmasÄ± ÅŸarttÄ±r.', en: 'Participants must have personally experienced the phenomenon.' }
            },
            'case-study': {
                icon: 'ğŸ“¦',
                title: { tr: 'Durum Ã‡alÄ±ÅŸmasÄ±', en: 'Case Study' },
                desc: { tr: 'SÄ±nÄ±rlÄ± bir sistemin (bir olay, program, aktivite) zaman iÃ§inde derinlemesine incelenmesidir.', en: 'In-depth study of a bounded system (event, program, activity) over time.' },
                sample: { tr: '4 - 5 Durum (veya tek durum)', en: '4 - 5 Cases (or single case)' },
                focus: { tr: 'Durumun detaylÄ± betimlenmesi.', en: 'Detailed description of the case.' },
                methods: { tr: ['GÃ¶zlem', 'GÃ¶rÃ¼ÅŸme', 'DokÃ¼man Analizi', 'GÃ¶rsel Materyaller'], en: ['Observation', 'Interviews', 'Document Analysis', 'Visual Materials'] },
                tip: { tr: 'Veri Ã§eÅŸitlemesi (triangulation) gÃ¼venirlik iÃ§in Ã§ok Ã¶nemlidir.', en: 'Data triangulation is crucial for reliability.' }
            },
            'grounded-theory': {
                icon: 'ğŸŒ±',
                title: { tr: 'GÃ¶mÃ¼lÃ¼ Teori', en: 'Grounded Theory' },
                desc: { tr: 'Verilerden yola Ã§Ä±karak bir sÃ¼reÃ§, eylem veya etkileÅŸim hakkÄ±nda genel bir teori oluÅŸturmayÄ± amaÃ§lar.', en: 'Aims to generate a general theory about a process, action, or interaction from data.' },
                sample: '20 - 60',
                focus: { tr: 'Teori Ã¼retimi veya geliÅŸtirilmesi.', en: 'Theory generation or development.' },
                methods: { tr: ['GÃ¶rÃ¼ÅŸme (OdaklÄ±)', 'SÃ¼rekli KarÅŸÄ±laÅŸtÄ±rmalÄ± Analiz'], en: ['Interviews (Focused)', 'Constant Comparative Analysis'] },
                tip: { tr: 'Veri doygunluÄŸuna (saturation) ulaÅŸmak esastÄ±r.', en: 'Reaching data saturation is essential.' }
            },
            'ethnography': {
                icon: 'ğŸŒ',
                title: { tr: 'Etnografi', en: 'Ethnography' },
                desc: { tr: 'Bir kÃ¼ltÃ¼r paylaÅŸan grubun davranÄ±ÅŸlarÄ±nÄ±, dilini ve etkileÅŸimlerini doÄŸal ortamÄ±nda inceler.', en: 'Examines the behavior, language, and interactions of a culture-sharing group in their natural setting.' },
                sample: { tr: 'TÃ¼m kÃ¼ltÃ¼r grubu', en: 'Entire culture group' },
                focus: { tr: 'KÃ¼ltÃ¼rel Ã¶rÃ¼ntÃ¼ler ve anlamlar.', en: 'Cultural patterns and meanings.' },
                methods: { tr: ['KatÄ±lÄ±mcÄ± GÃ¶zlem', 'Saha NotlarÄ±', 'GÃ¶rÃ¼ÅŸme'], en: ['Participant Observation', 'Field Notes', 'Interviews'] },
                tip: { tr: 'Uzun sÃ¼reli saha Ã§alÄ±ÅŸmasÄ± gerektirir.', en: 'Requires long-term fieldwork.' }
            },
            'narrative': {
                icon: 'ğŸ“–',
                title: { tr: 'AnlatÄ±', en: 'Narrative' },
                desc: { tr: 'Bireylerin hayat hikayelerini ve deneyimlerini kronolojik bir anlatÄ±yla keÅŸfeder.', en: 'Explores individuals\' life stories and experiences through a chronological narrative.' },
                sample: '1 - 2',
                focus: { tr: 'Bireysel hikayeler ve yaÅŸamlar.', en: 'Individual stories and lives.' },
                methods: { tr: ['GÃ¶rÃ¼ÅŸme', 'DokÃ¼manlar', 'Mektuplar', 'FotoÄŸraflar'], en: ['Interviews', 'Documents', 'Letters', 'Photos'] },
                tip: { tr: 'Hikayenin kronolojik olarak yeniden yapÄ±landÄ±rÄ±lmasÄ± Ã¶nemlidir.', en: 'Restorying (chronological reconstruction) is important.' }
            }
        };

        // Quantitative Data Object
        const quantitativeData = {
            'experimental': {
                icon: 'ğŸ§ª',
                title: { tr: 'Deneysel', en: 'Experimental' },
                desc: { tr: 'DeÄŸiÅŸkenler arasÄ±ndaki neden-sonuÃ§ iliÅŸkilerini test eder.', en: 'Tests cause-and-effect relationships between variables.' },
                sample: { tr: 'G*Power Analizi ile belirlenmeli', en: 'Determine via G*Power Analysis' },
                focus: { tr: 'Nedensellik ve Kontrol.', en: 'Causality and Control.' },
                methods: { tr: ['Ã–n Test / Son Test', 'Kontrol GruplarÄ±', 'Rastgele Atama'], en: ['Pre/Post Tests', 'Control Groups', 'Random Assignment'] },
                tip: { tr: 'Ä°Ã§ geÃ§erliliÄŸi tehdit eden faktÃ¶rleri kontrol etmek hayati Ã¶nem taÅŸÄ±r.', en: 'Controlling threats to internal validity is vital.' }
            },
            'correlational': {
                icon: 'ğŸ“ˆ',
                title: { tr: 'Ä°liÅŸkisel', en: 'Correlational' },
                desc: { tr: 'Ä°ki veya daha fazla deÄŸiÅŸken arasÄ±ndaki iliÅŸkiyi inceler (nedensellik yok).', en: 'Examines relationship between two or more variables (no causality).' },
                sample: { tr: 'Min N > 30 (Genelde N > 50+h)', en: 'Min N > 30 (Usually N > 50+k)' },
                focus: { tr: 'Ä°liÅŸki (Korelasyon) veya Yordama (Regresyon).', en: 'Association (Correlation) or Prediction (Regression).' },
                methods: { tr: ['Ã–lÃ§ekler', 'ArÅŸiv Verileri', 'Anketler'], en: ['Scales', 'Archival Data', 'Surveys'] },
                tip: { tr: 'Korelasyon nedensellik (causation) anlamÄ±na gelmez!', en: 'Correlation does not imply causation!' }
            },
            'survey': {
                icon: 'ğŸ“‹',
                title: { tr: 'Tarama (Survey)', en: 'Survey' },
                desc: { tr: 'Bir evrenin Ã¶zelliklerini, tutumlarÄ±nÄ± veya gÃ¶rÃ¼ÅŸlerini betimler.', en: 'Describes characteristics, attitudes, or opinions of a population.' },
                sample: { tr: 'Evreni Temsil Etmeli (bÃ¼yÃ¼k N)', en: 'Representative of population (large N)' },
                focus: { tr: 'Genellenebilirlik ve Betimleme.', en: 'Generalizability and Description.' },
                methods: { tr: ['Anketler', 'YapÄ±landÄ±rÄ±lmÄ±ÅŸ GÃ¶rÃ¼ÅŸmeler'], en: ['Questionnaires', 'Structured Interviews'] },
                tip: { tr: 'Geri dÃ¶nÃ¼ÅŸ oranÄ± (response rate) ve Ã¶rnekleme hatasÄ± kritiktir.', en: 'Response rate and sampling error are critical.' }
            }
        };

        // Mixed Data Object
        const mixedData = {
            'convergent': {
                icon: 'ğŸ”€',
                title: { tr: 'YakÄ±nsayan Paralel', en: 'Convergent Parallel' },
                desc: { tr: 'Nitel ve nicel veriler aynÄ± anda toplanÄ±r, analiz edilir ve sonuÃ§lar karÅŸÄ±laÅŸtÄ±rÄ±lÄ±r.', en: 'Qual and quant data collected concurrently, analyzed, and results compared.' },
                process: { tr: 'Nitel + Nicel -> KarÅŸÄ±laÅŸtÄ±rma/Yorum', en: 'Qual + Quant -> Compare/Interpret' },
                focus: { tr: 'SonuÃ§larÄ±n birbirini doÄŸrulayÄ±p doÄŸrulamadÄ±ÄŸÄ± (Corroboration).', en: 'Whether results corroborate each other.' },
                integration: { tr: 'Veri analizi ve yorum aÅŸamasÄ±nda birleÅŸtirilir.', en: 'Merged during data analysis and interpretation.' },
                tip: { tr: 'Verilerin eÅŸit aÄŸÄ±rlÄ±kta olmasÄ± idealdir.', en: 'Ideally, data strands have equal weight.' }
            },
            'explanatory': {
                icon: 'â¡ï¸',
                title: { tr: 'AÃ§Ä±klayÄ±cÄ± SÄ±ralÄ±', en: 'Explanatory Sequential' },
                desc: { tr: 'Ã–nce nicel veri toplanÄ±r, ardÄ±ndan nicel sonuÃ§larÄ± aÃ§Ä±klamak iÃ§in nitel veri toplanÄ±r.', en: 'Quant data collected first, followed by qual data to explain quant results.' },
                process: { tr: 'Nicel -> Nitel -> Yorum', en: 'Quant -> Qual -> Interpret' },
                focus: { tr: 'Nicel sonuÃ§larÄ±n derinlemesine aÃ§Ä±klanmasÄ±.', en: 'In-depth explanation of quantitative results.' },
                integration: { tr: 'Nitel veriler, nicel sonuÃ§lara baÄŸlanÄ±r.', en: 'Qualitative data connects to quantitative results.' },
                tip: { tr: 'KatÄ±lÄ±mcÄ±lar genellikle aynÄ± gruptan seÃ§ilir.', en: 'Participants are usually selected from the same group.' }
            },
            'exploratory': {
                icon: 'ğŸ’¡',
                title: { tr: 'KeÅŸfedici SÄ±ralÄ±', en: 'Exploratory Sequential' },
                desc: { tr: 'Ã–nce nitel veri toplanÄ±r (keÅŸif), ardÄ±ndan bulgularÄ± genellemek iÃ§in nicel veri toplanÄ±r.', en: 'Qual data collected first (explore), followed by quant data to generalize.' },
                process: { tr: 'Nitel -> Nicel -> Yorum', en: 'Qual -> Quant -> Interpret' },
                focus: { tr: 'Bir olguyu keÅŸfetme ve Ã¶lÃ§me aracÄ± geliÅŸtirme.', en: 'Exploring a phenomenon and instrument development.' },
                integration: { tr: 'Nitel bulgular nicel araca/deÄŸiÅŸkenlere dÃ¶nÃ¼ÅŸÃ¼r.', en: 'Qual findings inform quant instrument/variables.' },
                tip: { tr: 'Ã–lÃ§ek geliÅŸtirme Ã§alÄ±ÅŸmalarÄ± iÃ§in en uygun desendir.', en: 'Best design for scale development studies.' }
            }
        };

        // Synthesis Data Object
        const synthesisData = {
            'meta-analysis': {
                icon: 'ğŸ“Š',
                title: { tr: 'Meta-Analiz', en: 'Meta-Analysis' },
                desc: { tr: 'Birden fazla nicel Ã§alÄ±ÅŸmanÄ±n istatistiksel sonuÃ§larÄ±nÄ± birleÅŸtirerek genel bir etki bÃ¼yÃ¼klÃ¼ÄŸÃ¼ hesaplar.', en: 'Combines statistical results from multiple quantitative studies to calculate an overall effect size.' },
                sample: { tr: 'Ã‡alÄ±ÅŸma SayÄ±sÄ± (k > 5-10)', en: 'Number of Studies (k > 5-10)' },
                focus: { tr: 'Genel etki bÃ¼yÃ¼klÃ¼ÄŸÃ¼ ve homojenlik.', en: 'Overall effect size and homogeneity.' },
                methods: { tr: ['Forest Plot', 'Funnel Plot', 'ModeratÃ¶r Analizi'], en: ['Forest Plot', 'Funnel Plot', 'Moderator Analysis'] },
                tip: { tr: 'YayÄ±n yanlÄ±ÄŸÄ±na (Publication Bias) dikkat edilmelidir.', en: 'Publication bias must be considered.' }
            },
            'meta-synthesis': {
                icon: 'ğŸ§¶',
                title: { tr: 'Meta-Sentez', en: 'Meta-Synthesis' },
                desc: { tr: 'Nitel Ã§alÄ±ÅŸmalarÄ±n bulgularÄ±nÄ± yorumlayÄ±cÄ± bir yaklaÅŸÄ±mla birleÅŸtirerek yeni ve daha derin bir anlayÄ±ÅŸ oluÅŸturur.', en: 'Integrates findings from qualitative studies interpretively to create new and deeper understanding.' },
                sample: { tr: '10 - 50 Ã‡alÄ±ÅŸma', en: '10 - 50 Studies' },
                focus: { tr: 'TemalarÄ±n bÃ¼tÃ¼nleÅŸtirilmesi ve yorumlanmasÄ±.', en: 'Integration and interpretation of themes.' },
                methods: { tr: ['Tematik Sentez', 'Meta-etnografi'], en: ['Thematic Synthesis', 'Meta-ethnography'] },
                tip: { tr: 'Sadece bulgularÄ± Ã¶zetlemek deÄŸil, yeniden yorumlamak gerekir.', en: 'Requires re-interpretation, not just summarizing findings.' }
            }
        };

        // --- INIT ---
        window.onload = function() {
            const savedLang = localStorage.getItem('appLang');
            setLanguage(savedLang || 'tr', false);
            
            const urlLoaded = loadFromUrl();
            if(!urlLoaded) {
                renderHistoryList(getHistory());
                if(el.rScoreInput) el.rScoreInput.value = '0.';
            }
        };

        // --- LANGUAGE & URL LOGIC ---
        function setLanguage(lang, save=true) {
            if(!translations[lang]) return;
            currentLang = lang;
            document.documentElement.lang = lang;

            document.querySelectorAll('[data-tr]').forEach(item => {
                const keyTR = item.getAttribute('data-tr');
                const keyEN = item.getAttribute('data-en');
                if(translations[lang][keyTR]) {
                     item.innerHTML = translations[lang][keyTR].replace('(r)', '<span class="symbol">r</span>').replace('(n)', '<span class="symbol">n</span>').replace('(ZÌ„)', '<span class="symbol">ZÌ„</span>');
                } else {
                     item.innerHTML = (lang === 'tr' ? keyTR : keyEN).replace('(r)', '<span class="symbol">r</span>').replace('(n)', '<span class="symbol">n</span>').replace('(ZÌ„)', '<span class="symbol">ZÌ„</span>');
                }
            });

            document.querySelectorAll('[data-tr-placeholder]').forEach(item => {
                const key = item.getAttribute('data-tr-placeholder');
                if(translations[lang][key]) item.placeholder = translations[lang][key];
                else item.placeholder = lang === 'tr' ? item.getAttribute('data-tr-placeholder') : item.getAttribute('data-en-placeholder');
            });

            if(el.langTr) {
                el.langTr.className = lang === 'tr' ? "text-xs font-bold px-3 py-1.5 rounded-md border border-indigo-600 text-white bg-indigo-600 transition-colors" : "text-xs font-bold px-3 py-1.5 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-100 transition-colors";
                el.langEn.className = lang === 'en' ? "text-xs font-bold px-3 py-1.5 rounded-md border border-indigo-600 text-white bg-indigo-600 transition-colors" : "text-xs font-bold px-3 py-1.5 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-100 transition-colors";
            }
            if (isNLocked && el.nLockButton) {
                el.nLockButton.textContent = (lang === 'tr' ? 'Kilitli' : 'Locked') + ` (N=${lockedNValue})`;
            }

            if(save) localStorage.setItem('appLang', lang);
            renderHistoryList(getHistory());
            renderDataList();
            
            // Re-render open detail views
            let activeCard = document.querySelector('#view-qualitative .qual-card.selected');
            if(activeCard) showQualitativeDetail(activeCard.id.replace('card-', ''));
            
            activeCard = document.querySelector('#view-quantitative .design-card.selected');
            if(activeCard) showQuantitativeDetail(activeCard.id.replace('card-', ''));
            
            activeCard = document.querySelector('#view-mixed .design-card.selected');
            if(activeCard) showMixedDetail(activeCard.id.replace('card-', ''));
            
            activeCard = document.querySelector('#view-synthesis .design-card.selected');
            if(activeCard) showSynthesisDetail(activeCard.id.replace('card-', ''));
        }

        function loadFromUrl() {
            const params = new URLSearchParams(window.location.search);
            const data = params.get('data');
            const lang = params.get('lang');
            if(lang) setLanguage(lang, false);

            if(data) {
                try {
                    const parsed = JSON.parse(decodeURIComponent(data));
                    if(Array.isArray(parsed) && parsed.length >= 2) {
                        correlationData = parsed;
                        renderDataList();
                        calculateCombinedR(true);
                        const baseUrl = window.location.href.split('?')[0];
                        window.history.replaceState(null, null, baseUrl);
                        showMessage(translations[currentLang].msg_url_loaded, 'bg-indigo-100 text-indigo-700');
                        return true;
                    }
                } catch(e) { showMessage(translations[currentLang].msg_url_err, 'bg-red-100 text-red-700'); }
            }
            return false;
        }

        // --- RESEARCH DESIGN FUNCTIONS ---
        function showQualitativeDetail(type) {
            const data = qualitativeData[type];
            if (!data) return;
            document.querySelectorAll('#view-qualitative .qual-card').forEach(el => el.classList.remove('selected'));
            document.getElementById('card-' + type).classList.add('selected');
            document.getElementById('qual-placeholder-msg').classList.add('hidden');
            document.getElementById('qual-detail-area').classList.remove('hidden');
            const lang = currentLang;
            document.getElementById('qual-icon').textContent = data.icon;
            document.getElementById('qual-title').textContent = data.title[lang];
            document.getElementById('qual-desc').textContent = data.desc[lang];
            document.getElementById('qual-sample').textContent = typeof data.sample === 'object' ? data.sample[lang] : data.sample;
            document.getElementById('qual-focus').textContent = data.focus[lang];
            document.getElementById('qual-tip').textContent = data.tip[lang];
            const methodsList = document.getElementById('qual-methods');
            methodsList.innerHTML = '';
            data.methods[lang].forEach(m => { const li = document.createElement('li'); li.textContent = m; methodsList.appendChild(li); });
        }

        function showQuantitativeDetail(type) {
            const data = quantitativeData[type];
            if (!data) return;
            document.querySelectorAll('#view-quantitative .design-card').forEach(el => el.classList.remove('selected'));
            document.getElementById('card-' + type).classList.add('selected');
            document.getElementById('quant-placeholder-msg').classList.add('hidden');
            document.getElementById('quant-detail-area').classList.remove('hidden');
            const lang = currentLang;
            document.getElementById('quant-icon').textContent = data.icon;
            document.getElementById('quant-title').textContent = data.title[lang];
            document.getElementById('quant-desc').textContent = data.desc[lang];
            document.getElementById('quant-sample').textContent = data.sample[lang];
            document.getElementById('quant-focus').textContent = data.focus[lang];
            document.getElementById('quant-tip').textContent = data.tip[lang];
            const methodsList = document.getElementById('quant-methods');
            methodsList.innerHTML = '';
            data.methods[lang].forEach(m => { const li = document.createElement('li'); li.textContent = m; methodsList.appendChild(li); });
        }

        function showMixedDetail(type) {
            const data = mixedData[type];
            if (!data) return;
            document.querySelectorAll('#view-mixed .design-card').forEach(el => el.classList.remove('selected'));
            document.getElementById('card-' + type).classList.add('selected');
            document.getElementById('mixed-placeholder-msg').classList.add('hidden');
            document.getElementById('mixed-detail-area').classList.remove('hidden');
            const lang = currentLang;
            document.getElementById('mixed-icon').textContent = data.icon;
            document.getElementById('mixed-title').textContent = data.title[lang];
            document.getElementById('mixed-desc').textContent = data.desc[lang];
            document.getElementById('mixed-process').textContent = data.process[lang];
            document.getElementById('mixed-focus').textContent = data.focus[lang];
            document.getElementById('mixed-integration').textContent = data.integration[lang];
            document.getElementById('mixed-tip').textContent = data.tip[lang];
        }

        function showSynthesisDetail(type) {
            const data = synthesisData[type];
            if (!data) return;
            document.querySelectorAll('#view-synthesis .design-card').forEach(el => el.classList.remove('selected'));
            document.getElementById('card-' + type).classList.add('selected');
            document.getElementById('synthesis-placeholder-msg').classList.add('hidden');
            document.getElementById('synthesis-detail-area').classList.remove('hidden');
            const lang = currentLang;
            document.getElementById('synthesis-icon').textContent = data.icon;
            document.getElementById('synthesis-title').textContent = data.title[lang];
            document.getElementById('synthesis-desc').textContent = data.desc[lang];
            document.getElementById('synthesis-sample').textContent = data.sample[lang];
            document.getElementById('synthesis-focus').textContent = data.focus[lang];
            document.getElementById('synthesis-tip').textContent = data.tip[lang];
            const methodsList = document.getElementById('synthesis-methods');
            methodsList.innerHTML = '';
            data.methods[lang].forEach(m => { const li = document.createElement('li'); li.textContent = m; methodsList.appendChild(li); });
        }

        // --- PRISMA COUNTER LOGIC ---
        function calculatePRISMA() {
            // Get Inputs
            const db = parseInt(document.getElementById('prisma_db').value) || 0;
            const other = parseInt(document.getElementById('prisma_other').value) || 0;
            const duplicates = parseInt(document.getElementById('prisma_duplicates').value) || 0;
            const screened_excluded = parseInt(document.getElementById('prisma_screened_excluded').value) || 0;
            const not_retrieved = parseInt(document.getElementById('prisma_not_retrieved').value) || 0;
            const full_excluded = parseInt(document.getElementById('prisma_full_excluded').value) || 0;

            // Calculations
            const identification = db + other;
            const after_duplicates = identification - duplicates;
            const screened = after_duplicates;
            const sought_for_retrieval = screened - screened_excluded;
            const assessed_for_eligibility = sought_for_retrieval - not_retrieved;
            const included = assessed_for_eligibility - full_excluded;

            // Update UI
            document.getElementById('prisma_final').textContent = included;
            
            // Generate Summary Text
            const lang = currentLang;
            let summary = "";
            if(lang === 'tr') {
                summary = `PRISMA akÄ±ÅŸ ÅŸemasÄ±na gÃ¶re toplam ${identification} kayÄ±t tanÄ±mlanmÄ±ÅŸtÄ±r (${db} veritabanÄ±, ${other} diÄŸer). ${duplicates} tekrar eden kayÄ±t Ã§Ä±karÄ±ldÄ±ktan sonra ${screened} kayÄ±t taranmÄ±ÅŸtÄ±r. BaÅŸlÄ±k ve Ã¶zet incelemesi sonucu ${screened_excluded} kayÄ±t elenmiÅŸtir. Kalan ${sought_for_retrieval} kayÄ±ttan ${not_retrieved} tanesine ulaÅŸÄ±lamamÄ±ÅŸ, ${assessed_for_eligibility} tam metin uygunluk aÃ§Ä±sÄ±ndan deÄŸerlendirilmiÅŸtir. ${full_excluded} makale kriterleri karÅŸÄ±lamadÄ±ÄŸÄ± iÃ§in elenmiÅŸ ve toplam ${included} Ã§alÄ±ÅŸma analize dahil edilmiÅŸtir.`;
            } else {
                summary = `A total of ${identification} records were identified (${db} database, ${other} other). After removing ${duplicates} duplicates, ${screened} records were screened. ${screened_excluded} records were excluded based on title and abstract. Of the remaining ${sought_for_retrieval}, ${not_retrieved} were not retrieved. ${assessed_for_eligibility} full-text articles were assessed for eligibility. ${full_excluded} were excluded, resulting in ${included} studies included in the analysis.`;
            }
            document.getElementById('prisma_summary').textContent = summary;
        }

        // --- PICO GENERATOR LOGIC ---
        function generatePICO() {
            const p = document.getElementById('pico_p').value.trim();
            const i = document.getElementById('pico_i').value.trim();
            const c = document.getElementById('pico_c').value.trim();
            const o = document.getElementById('pico_o').value.trim();
            const resBox = document.getElementById('pico_result');
            const qBox = document.getElementById('pico_question');

            if (!p || !i || !o) {
                alert(currentLang === 'tr' ? "LÃ¼tfen en az P, I ve O alanlarÄ±nÄ± doldurun." : "Please fill at least P, I, and O fields.");
                return;
            }

            let question = "";
            if (currentLang === 'tr') {
                question = `${p} grubunda, ${c ? c + ' ile karÅŸÄ±laÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda ' : ''}${i} uygulamasÄ±nÄ±n ${o} Ã¼zerindeki etkisi nedir?`;
            } else {
                question = `In ${p}, how does ${i} affect ${o}${c ? ' compared to ' + c : ''}?`;
            }

            qBox.textContent = question;
            resBox.classList.remove('hidden');
        }

        // --- RANDOMIZER LOGIC ---
        function randomizeGroups() {
            const n = parseInt(document.getElementById('rand_n').value);
            const groupsStr = document.getElementById('rand_groups').value.trim();
            
            if (!n || !groupsStr) {
                alert("LÃ¼tfen katÄ±lÄ±mcÄ± sayÄ±sÄ±nÄ± ve gruplarÄ± giriniz.");
                return;
            }

            const groups = groupsStr.split(',').map(g => g.trim()).filter(g => g);
            if (groups.length < 2) {
                alert("En az 2 grup girmelisiniz.");
                return;
            }

            // Create assignment array
            let assignments = [];
            // Balanced randomization logic (block randomization simplified)
            // Ensure equal distribution if possible
            const perGroup = Math.ceil(n / groups.length);
            for (let g of groups) {
                for (let i = 0; i < perGroup; i++) {
                    assignments.push(g);
                }
            }
            // Trim excess if any (simple approach) or strict cut
            assignments = assignments.slice(0, n);
            
            // Shuffle (Fisher-Yates)
            for (let i = assignments.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [assignments[i], assignments[j]] = [assignments[j], assignments[i]];
            }

            // Display
            const listDiv = document.getElementById('rand_list');
            listDiv.innerHTML = assignments.map((g, i) => `<div>${i+1}. KatÄ±lÄ±mcÄ± -> <strong>${g}</strong></div>`).join('');
            document.getElementById('rand_result_area').classList.remove('hidden');
        }

        // --- TOOL 1: PEARSON LOGIC (EXISTING) ---
        function toggleNLock() {
            if(!isNLocked) {
                const val = parseInt(el.nSizeInput.value, 10);
                if(isNaN(val) || val < 3) {
                    showMessage(translations[currentLang].err_n, 'bg-red-100 text-red-700');
                    return;
                }
                isNLocked = true;
                lockedNValue = val;
                el.nSizeInput.disabled = true;
                el.nLockButton.classList.replace('btn-lock-default', 'bg-indigo-600');
                el.nLockButton.classList.add('hover:bg-indigo-700');
                showMessage(translations[currentLang].msg_locked(val), 'bg-indigo-100 text-indigo-700');
            } else {
                isNLocked = false;
                lockedNValue = null;
                el.nSizeInput.disabled = false;
                el.nSizeInput.value = '';
                el.nLockButton.classList.replace('bg-indigo-600', 'btn-lock-default');
                el.nLockButton.classList.remove('hover:bg-indigo-700');
                showMessage(translations[currentLang].msg_unlocked, 'bg-yellow-100 text-yellow-700');
            }
            // Update Text
            const lang = currentLang;
            if (isNLocked) {
                el.nLockButton.textContent = (lang === 'tr' ? 'Kilitli' : 'Locked') + ` (N=${lockedNValue})`;
            } else {
                el.nLockButton.textContent = translations[lang].btn_lock;
            }
        }

        function handleKeydown(e) { if(e.key === 'Enter') addEntry(); }

        function addEntry() {
            const title = el.titleInput.value.trim();
            const r = parseFloat(el.rScoreInput.value);
            let n = isNLocked ? lockedNValue : parseInt(el.nSizeInput.value, 10);

            if(!title || isNaN(r) || r < -1 || r > 1 || isNaN(n) || n < 3) {
                showMessage(currentLang === 'tr' ? 'LÃ¼tfen alanlarÄ± kontrol edin.' : 'Please check fields.', 'bg-red-100 text-red-700');
                return;
            }

            correlationData.push({ title, r, n });
            el.titleInput.value = '';
            el.rScoreInput.value = '0.';
            if(!isNLocked) el.nSizeInput.value = '';
            el.titleInput.focus();
            renderDataList();
            showMessage(translations[currentLang].msg_added(title, n), 'bg-green-100 text-green-800');
            el.calcBtn.disabled = correlationData.length < 2;
        }

        function renderDataList() {
            if(!el.dataList) return;
            el.dataList.innerHTML = '';
            if(correlationData.length === 0) {
                el.dataList.innerHTML = `<p class="text-gray-400 italic text-sm text-center py-8">${translations[currentLang].ph_list_empty}</p>`;
                el.resultsArea.classList.add('hidden');
                el.calcBtn.disabled = true;
                return;
            }
            correlationData.forEach((d, i) => {
                const div = document.createElement('div');
                div.className = 'flex justify-between items-center bg-white p-3 rounded border border-gray-200 mb-2 last:mb-0';
                div.innerHTML = `<div class="truncate pr-2"><span class="font-bold text-gray-800 block truncate">${d.title}</span><span class="text-xs text-gray-500">r=${d.r}, n=${d.n}</span></div><button onclick="removeEntry(${i})" class="text-red-500 hover:text-red-700 text-sm font-semibold px-2 py-1 bg-red-50 rounded hover:bg-red-100 transition">${currentLang === 'tr' ? 'Sil' : 'Del'}</button>`;
                el.dataList.appendChild(div);
            });
        }

        function removeEntry(i) {
            correlationData.splice(i, 1);
            renderDataList();
            el.calcBtn.disabled = correlationData.length < 2;
            if(correlationData.length < 2) el.resultsArea.classList.add('hidden');
        }

        function clearAllData(silent=false) {
            if(isNLocked) toggleNLock();
            correlationData = [];
            renderDataList();
            el.titleInput.value = '';
            el.rScoreInput.value = '0.';
            el.nSizeInput.value = '';
            el.resultsArea.classList.add('hidden');
            if(!silent) showMessage(translations[currentLang].msg_cleared, 'bg-yellow-100 text-yellow-800');
        }

        function calculateCombinedR(skipHistory=false) {
            if(correlationData.length < 2) return;
            let sumWeightedZ = 0;
            let sumWeights = 0;
            correlationData.forEach(d => {
                const z = 0.5 * Math.log((1 + d.r) / (1 - d.r));
                const w = d.n - 3;
                sumWeightedZ += w * z;
                sumWeights += w;
            });
            const avgZ = sumWeightedZ / sumWeights;
            const combinedR = (Math.exp(2 * avgZ) - 1) / (Math.exp(2 * avgZ) + 1);
            el.combinedRText.textContent = combinedR.toFixed(3);
            el.avgZText.textContent = avgZ.toFixed(4);
            el.resultsArea.classList.remove('hidden');
            if(!skipHistory) saveHistory({ ts: Date.now(), res: combinedR, data: correlationData.map(x => ({...x})) });
        }

        function showMessage(msg, classes) {
            if(!el.msgArea) return;
            el.msgArea.textContent = msg;
            el.msgArea.className = `text-sm text-center py-2 rounded-lg mb-2 ${classes}`;
            el.msgArea.classList.remove('hidden');
            setTimeout(() => el.msgArea.classList.add('hidden'), 3000);
        }

        function copyResult() {
            const txt = el.combinedRText.textContent;
            navigator.clipboard.writeText(txt).then(() => {
                el.copyMsgArea.textContent = translations[currentLang].msg_copied;
                el.copyMsgArea.classList.remove('hidden');
                setTimeout(() => el.copyMsgArea.classList.add('hidden'), 2000);
            });
        }

        function getHistory() { return JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]'); }
        function saveHistory(entry) {
            const h = getHistory();
            h.unshift(entry);
            localStorage.setItem(HISTORY_KEY, JSON.stringify(h.slice(0, 10)));
            renderHistoryList(getHistory());
        }
        function clearHistory() {
            localStorage.removeItem(HISTORY_KEY);
            renderHistoryList([]);
        }
        function renderHistoryList(list) {
            if(!el.histList) return;
            el.histList.innerHTML = '';
            if(list.length === 0) {
                el.histList.innerHTML = `<p class="text-gray-400 text-sm text-center italic py-2">${translations[currentLang].ph_history}</p>`;
                el.clearHistBtn.classList.add('hidden');
                return;
            }
            el.clearHistBtn.classList.remove('hidden');
            list.forEach((item, idx) => {
                const date = new Date(item.ts).toLocaleDateString(currentLang==='tr'?'tr-TR':'en-US', {hour:'2-digit', minute:'2-digit'});
                const div = document.createElement('div');
                div.className = 'bg-gray-50 p-3 rounded-lg border border-gray-200 text-sm hover:bg-gray-100 transition';
                div.innerHTML = `<div class="flex justify-between items-center mb-1"><span class="font-semibold text-gray-700">${date}</span><span class="font-bold text-green-600">r = ${item.res.toFixed(3)}</span></div><div class="text-xs text-gray-500 mb-2 truncate">${item.data.length} ${currentLang==='tr'?'alt boyut':'subscales'}: ${item.data.map(d=>d.title).join(', ')}</div><div class="flex gap-2"><button onclick="restoreHistory(${idx})" class="text-xs text-indigo-600 hover:text-indigo-800 font-medium bg-indigo-50 px-2 py-1 rounded">${translations[currentLang].btn_load}</button><button onclick="shareHistory(${idx})" class="text-xs text-blue-600 hover:text-blue-800 font-medium bg-blue-50 px-2 py-1 rounded relative share-btn">${translations[currentLang].btn_share}</button></div>`;
                el.histList.appendChild(div);
            });
        }
        function restoreHistory(idx) {
            const h = getHistory();
            if(h[idx]) { correlationData = h[idx].data.map(x=>({...x})); renderDataList(); calculateCombinedR(true); }
        }
        function shareHistory(idx) {
            const h = getHistory();
            const entry = h[idx];
            if(!entry) return;
            const json = JSON.stringify(entry.data);
            const url = `${window.location.origin}${window.location.pathname}?data=${encodeURIComponent(json)}&lang=${currentLang}`;
            navigator.clipboard.writeText(url).then(() => {
                const btn = event.target.closest('.share-btn');
                const originalText = btn.textContent;
                btn.textContent = translations[currentLang].msg_copied;
                setTimeout(() => btn.textContent = originalText, 1500);
            });
        }

        // --- NEW TOOLS FUNCTIONS ---

        // 1. Effect Size
        function calculateEffectSize() {
            const m1 = parseFloat(document.getElementById('es_m1').value);
            const sd1 = parseFloat(document.getElementById('es_sd1').value);
            const n1 = parseFloat(document.getElementById('es_n1').value);
            const m2 = parseFloat(document.getElementById('es_m2').value);
            const sd2 = parseFloat(document.getElementById('es_sd2').value);
            const n2 = parseFloat(document.getElementById('es_n2').value);

            if ([m1, sd1, n1, m2, sd2, n2].some(isNaN)) {
                alert(currentLang === 'tr' ? "LÃ¼tfen tÃ¼m deÄŸerleri giriniz." : "Please enter all values.");
                return;
            }

            const pooledSD = Math.sqrt(((n1 - 1) * sd1 ** 2 + (n2 - 1) * sd2 ** 2) / (n1 + n2 - 2));
            const d = (m1 - m2) / pooledSD;
            
            const absD = Math.abs(d);
            let interpretation = "";
            if (absD < 0.2) interpretation = translations[currentLang]["Ä°hmal Edilebilir"];
            else if (absD < 0.5) interpretation = translations[currentLang]["KÃ¼Ã§Ã¼k Etki"];
            else if (absD < 0.8) interpretation = translations[currentLang]["Orta Etki"];
            else if (absD < 1.2) interpretation = translations[currentLang]["GeniÅŸ Etki"];
            else interpretation = translations[currentLang]["Ã‡ok GeniÅŸ Etki"];

            document.getElementById('es_d_value').textContent = d.toFixed(3);
            document.getElementById('es_interpretation').textContent = interpretation;
            document.getElementById('es_result_area').classList.remove('hidden');
        }

        // 2. Sample Size
        function calculateSampleSize() {
            const pop = parseFloat(document.getElementById('ss_pop').value);
            const z = parseFloat(document.getElementById('ss_conf').value);
            const margin = parseFloat(document.getElementById('ss_margin').value) / 100;
            const p = 0.5;

            if (isNaN(z) || isNaN(margin) || margin <= 0) {
                alert("GeÃ§ersiz giriÅŸ.");
                return;
            }

            let n0 = (z ** 2 * p * (1 - p)) / (margin ** 2);

            if (pop && pop > 0) {
                n0 = n0 / (1 + ((n0 - 1) / pop));
            }

            document.getElementById('ss_result_value').textContent = Math.ceil(n0);
            document.getElementById('ss_result_area').classList.remove('hidden');
        }

        // 3. Normality Test
        function calculateNormality() {
            const skew = parseFloat(document.getElementById('nt_skew').value);
            const skewErr = parseFloat(document.getElementById('nt_skew_err').value);
            const kurt = parseFloat(document.getElementById('nt_kurt').value);
            const kurtErr = parseFloat(document.getElementById('nt_kurt_err').value);

            if ([skew, skewErr, kurt, kurtErr].some(isNaN)) {
                alert("LÃ¼tfen tÃ¼m alanlarÄ± doldurun.");
                return;
            }

            const zSkew = skew / skewErr;
            const zKurt = kurt / kurtErr;

            const isSkewNormal = Math.abs(zSkew) < 1.96;
            const isKurtNormal = Math.abs(zKurt) < 1.96;

            const tNormal = translations[currentLang]["DaÄŸÄ±lÄ±m Normal"];
            const tNotNormal = translations[currentLang]["DaÄŸÄ±lÄ±m Normal DeÄŸil"];

            document.getElementById('nt_skew_z').textContent = zSkew.toFixed(3);
            const skewBox = document.getElementById('nt_skew_res_box');
            skewBox.className = isSkewNormal ? "p-3 rounded border bg-green-50 border-green-200" : "p-3 rounded border bg-red-50 border-red-200";
            document.getElementById('nt_skew_comment').textContent = isSkewNormal ? `âœ… ${tNormal}` : `âŒ ${tNotNormal}`;

            document.getElementById('nt_kurt_z').textContent = zKurt.toFixed(3);
            const kurtBox = document.getElementById('nt_kurt_res_box');
            kurtBox.className = isKurtNormal ? "p-3 rounded border bg-green-50 border-green-200" : "p-3 rounded border bg-red-50 border-red-200";
            document.getElementById('nt_kurt_comment').textContent = isKurtNormal ? `âœ… ${tNormal}` : `âŒ ${tNotNormal}`;

            document.getElementById('nt_result_area').classList.remove('hidden');
        }

        // 4. APA GENERATOR
        function setApaType(type) {
            currentApaType = type;
            document.getElementById('btn-apa-book').className = type === 'book' ? "px-4 py-2 rounded-lg font-bold text-sm bg-indigo-600 text-white transition" : "px-4 py-2 rounded-lg font-bold text-sm bg-gray-200 text-gray-700 hover:bg-gray-300 transition";
            document.getElementById('btn-apa-article').className = type === 'article' ? "px-4 py-2 rounded-lg font-bold text-sm bg-indigo-600 text-white transition" : "px-4 py-2 rounded-lg font-bold text-sm bg-gray-200 text-gray-700 hover:bg-gray-300 transition";
            document.getElementById('btn-apa-website').className = type === 'website' ? "px-4 py-2 rounded-lg font-bold text-sm bg-indigo-600 text-white transition" : "px-4 py-2 rounded-lg font-bold text-sm bg-gray-200 text-gray-700 hover:bg-gray-300 transition";

            const fields = {
                book: ['apa-group-book'],
                article: ['apa-group-article'],
                website: ['apa-group-website']
            };

            // Hide all specific groups
            document.getElementById('apa-group-book').classList.add('hidden');
            document.getElementById('apa-group-article').classList.add('hidden');
            document.getElementById('apa-group-website').classList.add('hidden');

            // Show selected
            fields[type].forEach(id => document.getElementById(id).classList.remove('hidden'));
        }

        function generateAPA() {
            const author = document.getElementById('apa_author').value.trim();
            const year = document.getElementById('apa_year').value.trim();
            const title = document.getElementById('apa_title').value.trim();
            let result = "";

            if (currentApaType === 'book') {
                const publisher = document.getElementById('apa_publisher').value.trim();
                // Author, A. A. (Year). *Title*. Publisher.
                result = `${author} (${year}). <i>${title}</i>. ${publisher}.`;
            } else if (currentApaType === 'article') {
                const journal = document.getElementById('apa_journal').value.trim();
                const volume = document.getElementById('apa_volume').value.trim();
                const issue = document.getElementById('apa_issue').value.trim();
                const pages = document.getElementById('apa_pages').value.trim();
                const doi = document.getElementById('apa_doi').value.trim();
                // Author, A. A. (Year). Title. *Journal, Volume*(Issue), Pages. DOI
                result = `${author} (${year}). ${title}. <i>${journal}, ${volume}</i>(${issue}), ${pages}. ${doi}`;
            } else if (currentApaType === 'website') {
                const siteName = document.getElementById('apa_site_name').value.trim();
                const url = document.getElementById('apa_url').value.trim();
                // Author, A. A. (Year). *Title*. Site Name. URL
                result = `${author} (${year}). <i>${title}</i>. ${siteName}. ${url}`;
            }

            document.getElementById('apa_result_text').innerHTML = result;
            document.getElementById('apa_result_container').classList.remove('hidden');
        }

        function copyApaResult() {
            const text = document.getElementById('apa_result_text').innerText; // Use innerText to get plain text? No, innerHTML for italics formatting might be needed but clipboard usually plain.
            // Actually, copying HTML to clipboard is tricky. Let's stick to text or use a range.
            // For academic purposes, rich text copy is better.
            
            const element = document.getElementById('apa_result_text');
            const range = document.createRange();
            range.selectNodeContents(element);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            
            try {
                document.execCommand('copy');
                const msg = document.getElementById('apa_copy_msg');
                msg.classList.remove('hidden');
                setTimeout(() => msg.classList.add('hidden'), 2000);
            } catch(e) {
                alert("Kopyalama baÅŸarÄ±sÄ±z.");
            }
            selection.removeAllRanges();
        }

        // 5. ABSTRACT CHECKER
        function checkAbstract() {
            const text = document.getElementById('abstract_text').value;
            const wordCount = text.trim() === '' ? 0 : text.trim().split(/\s+/).length;
            const charCount = text.length;
            // Simple sentence estimation (dots, exclamations, questions)
            const sentenceCount = text.split(/[.!?]+/).filter(Boolean).length;

            document.getElementById('abs_word_count').textContent = wordCount;
            document.getElementById('stat_words').textContent = wordCount;
            document.getElementById('stat_chars').textContent = charCount;
            document.getElementById('stat_sentences').textContent = sentenceCount;
        }

    </script>
</body>
</html>
